<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Short Introduction to R and the tidyverse | Introduction to Statistics for Experimental Psychology with R</title>
  <meta name="description" content="Statistics for Experimental Psychology with R using the afex package." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Short Introduction to R and the tidyverse | Introduction to Statistics for Experimental Psychology with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Statistics for Experimental Psychology with R using the afex package." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Short Introduction to R and the tidyverse | Introduction to Statistics for Experimental Psychology with R" />
  
  <meta name="twitter:description" content="Statistics for Experimental Psychology with R using the afex package." />
  

<meta name="author" content="Henrik Singmann" />


<meta name="date" content="2021-08-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-2-quiz.html"/>
<link rel="next" href="standard1.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="include/style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Statistics for Experimental Psychology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>0.1</b> Acknowledgments</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#license-and-attribution"><i class="fa fa-check"></i><b>0.2</b> License and Attribution</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html"><i class="fa fa-check"></i><b>1</b> Role of Statistics in the Research Process</a>
<ul>
<li class="chapter" data-level="1.1" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#the-research-process"><i class="fa fa-check"></i><b>1.1</b> The Research Process</a></li>
<li class="chapter" data-level="1.2" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#example-the-psychology-of-loss-aversion"><i class="fa fa-check"></i><b>1.2</b> Example: The Psychology of Loss Aversion</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#evidence-for-loss-aversion-lotteries"><i class="fa fa-check"></i><b>1.2.1</b> Evidence for Loss Aversion: Lotteries</a></li>
<li class="chapter" data-level="1.2.2" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#alternative-explanation-loss-aversion-or-loss-seeking"><i class="fa fa-check"></i><b>1.2.2</b> Alternative Explanation: Loss Aversion or Loss Seeking?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#epistemic-gaps-the-difference-between-what-we-want-to-know-and-what-we-can-know"><i class="fa fa-check"></i><b>1.3</b> Epistemic Gaps: The Difference Between What we Want to Know and What we can Know</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#epistemic-gap-1-underdetermination-of-theory-by-data"><i class="fa fa-check"></i><b>1.3.1</b> Epistemic Gap 1: Underdetermination of Theory by Data</a></li>
<li class="chapter" data-level="1.3.2" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#epistemic-gap-2-signal-versus-noise"><i class="fa fa-check"></i><b>1.3.2</b> Epistemic Gap 2: Signal versus Noise</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#summary"><i class="fa fa-check"></i><b>1.4</b> Summary</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#some-further-examples-and-passing-thoughts"><i class="fa fa-check"></i><b>1.4.1</b> Some Further Examples and Passing Thoughts</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="role-of-statistics-in-the-research-process.html"><a href="role-of-statistics-in-the-research-process.html#conclusion"><i class="fa fa-check"></i><b>1.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-1-quiz.html"><a href="chapter-1-quiz.html"><i class="fa fa-check"></i>Chapter 1: Quiz</a></li>
<li class="chapter" data-level="2" data-path="research-designs.html"><a href="research-designs.html"><i class="fa fa-check"></i><b>2</b> Data and Research Designs</a>
<ul>
<li class="chapter" data-level="2.1" data-path="research-designs.html"><a href="research-designs.html#empirical-evidence-and-data"><i class="fa fa-check"></i><b>2.1</b> Empirical Evidence and Data</a></li>
<li class="chapter" data-level="2.2" data-path="research-designs.html"><a href="research-designs.html#data-types"><i class="fa fa-check"></i><b>2.2</b> Data Types</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="research-designs.html"><a href="research-designs.html#numerical-versus-categorical-variables"><i class="fa fa-check"></i><b>2.2.1</b> Numerical Versus Categorical Variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="research-designs.html"><a href="research-designs.html#assumptions-of-numerical-variables"><i class="fa fa-check"></i><b>2.2.2</b> Assumptions of Numerical Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="research-designs.html"><a href="research-designs.html#measurement"><i class="fa fa-check"></i><b>2.3</b> Measurement</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="research-designs.html"><a href="research-designs.html#measurement-scales"><i class="fa fa-check"></i><b>2.3.1</b> Measurement Scales</a></li>
<li class="chapter" data-level="2.3.2" data-path="research-designs.html"><a href="research-designs.html#reliability-and-validity"><i class="fa fa-check"></i><b>2.3.2</b> Reliability and Validity</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="research-designs.html"><a href="research-designs.html#independent-and-dependent-variables"><i class="fa fa-check"></i><b>2.4</b> Independent and Dependent Variables</a></li>
<li class="chapter" data-level="2.5" data-path="research-designs.html"><a href="research-designs.html#experimental-versus-observational-variables"><i class="fa fa-check"></i><b>2.5</b> Experimental versus Observational Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="research-designs.html"><a href="research-designs.html#epistemic-gap-3-causal-inference-and-confounding-variables"><i class="fa fa-check"></i><b>2.5.1</b> Epistemic Gap 3: Causal Inference and Confounding Variables</a></li>
<li class="chapter" data-level="2.5.2" data-path="research-designs.html"><a href="research-designs.html#is-causal-inference-from-observational-data-possible-at-all"><i class="fa fa-check"></i><b>2.5.2</b> Is Causal Inference from Observational Data Possible at All?</a></li>
<li class="chapter" data-level="2.5.3" data-path="research-designs.html"><a href="research-designs.html#internal-versus-external-validity"><i class="fa fa-check"></i><b>2.5.3</b> Internal versus External Validity</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="research-designs.html"><a href="research-designs.html#summary-1"><i class="fa fa-check"></i><b>2.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2-quiz.html"><a href="chapter-2-quiz.html"><i class="fa fa-check"></i>Chapter 2: Quiz</a></li>
<li class="chapter" data-level="3" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Short Introduction to <code>R</code> and the <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#what-is-r"><i class="fa fa-check"></i><b>3.1</b> What is <code>R</code>?</a></li>
<li class="chapter" data-level="3.2" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#getting-started-with-r"><i class="fa fa-check"></i><b>3.2</b> Getting Started with <code>R</code></a></li>
<li class="chapter" data-level="3.3" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#rstudio-setup"><i class="fa fa-check"></i><b>3.3</b> <code>RStudio</code> Setup</a></li>
<li class="chapter" data-level="3.4" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#a-base-r-example-session"><i class="fa fa-check"></i><b>3.4</b> A Base <code>R</code> Example Session</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#data-files-scripts-and-working-directory"><i class="fa fa-check"></i><b>3.4.1</b> Data Files, Scripts, and Working Directory</a></li>
<li class="chapter" data-level="3.4.2" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#read-data-and-inspecting-it"><i class="fa fa-check"></i><b>3.4.2</b> Read Data and Inspecting it</a></li>
<li class="chapter" data-level="3.4.3" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#transforming-categorical-variables-into-factors"><i class="fa fa-check"></i><b>3.4.3</b> Transforming Categorical Variables into Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#the-tidyverse"><i class="fa fa-check"></i><b>3.5</b> The <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#tibble-and-readr"><i class="fa fa-check"></i><b>3.5.1</b> <code>tibble</code> and <code>readr</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#the-pipe"><i class="fa fa-check"></i><b>3.5.2</b> The Pipe: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#dplyr"><i class="fa fa-check"></i><b>3.5.3</b> <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#ggplot2"><i class="fa fa-check"></i><b>3.6</b> <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#first-ggplot2-example"><i class="fa fa-check"></i><b>3.6.1</b> First <code>ggplot2</code> Example</a></li>
<li class="chapter" data-level="3.6.2" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#two-continuous-variables"><i class="fa fa-check"></i><b>3.6.2</b> Two Continuous Variables</a></li>
<li class="chapter" data-level="3.6.3" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#one-continuous-and-one-categorical-variable"><i class="fa fa-check"></i><b>3.6.3</b> One Continuous and one Categorical Variable</a></li>
<li class="chapter" data-level="3.6.4" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#one-continuous-variables-histograms"><i class="fa fa-check"></i><b>3.6.4</b> One Continuous Variables: Histograms</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="short-introduction-to-r-and-the-tidyverse.html"><a href="short-introduction-to-r-and-the-tidyverse.html#cheat-sheets"><i class="fa fa-check"></i><b>3.7</b> Cheat Sheets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="standard1.html"><a href="standard1.html"><i class="fa fa-check"></i><b>4</b> The Standard Approach for One Independent Variable</a>
<ul>
<li class="chapter" data-level="4.1" data-path="standard1.html"><a href="standard1.html#ex:urry"><i class="fa fa-check"></i><b>4.1</b> Example Data: Note Taking Experiment</a></li>
<li class="chapter" data-level="4.2" data-path="standard1.html"><a href="standard1.html#the-logic-of-inferential-statistics"><i class="fa fa-check"></i><b>4.2</b> The Logic of Inferential Statistics</a></li>
<li class="chapter" data-level="4.3" data-path="standard1.html"><a href="standard1.html#the-basic-statistical-model"><i class="fa fa-check"></i><b>4.3</b> The Basic Statistical Model</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="standard1.html"><a href="standard1.html#model-predictions"><i class="fa fa-check"></i><b>4.3.1</b> Model Predictions</a></li>
<li class="chapter" data-level="4.3.2" data-path="standard1.html"><a href="standard1.html#statistical-model-for-the-example-data"><i class="fa fa-check"></i><b>4.3.2</b> Statistical Model for the Example Data</a></li>
<li class="chapter" data-level="4.3.3" data-path="standard1.html"><a href="standard1.html#understanding-the-statistical-model"><i class="fa fa-check"></i><b>4.3.3</b> Understanding the Statistical Model</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="standard1.html"><a href="standard1.html#estimating-the-statistical-model-in-r"><i class="fa fa-check"></i><b>4.4</b> Estimating the Statistical Model in R</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="standard1.html"><a href="standard1.html#package-and-data-setup"><i class="fa fa-check"></i><b>4.4.1</b> Package and Data Setup</a></li>
<li class="chapter" data-level="4.4.2" data-path="standard1.html"><a href="standard1.html#estimating-the-statistical-model"><i class="fa fa-check"></i><b>4.4.2</b> Estimating the Statistical Model</a></li>
<li class="chapter" data-level="4.4.3" data-path="standard1.html"><a href="standard1.html#interpreting-the-results"><i class="fa fa-check"></i><b>4.4.3</b> Interpreting the Results</a></li>
<li class="chapter" data-level="4.4.4" data-path="standard1.html"><a href="standard1.html#data-visualisation"><i class="fa fa-check"></i><b>4.4.4</b> Data Visualisation</a></li>
<li class="chapter" data-level="4.4.5" data-path="standard1.html"><a href="standard1.html#follow-up-analysis"><i class="fa fa-check"></i><b>4.4.5</b> Follow-Up Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="standard1.html"><a href="standard1.html#summary-2"><i class="fa fa-check"></i><b>4.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html"><i class="fa fa-check"></i><b>5</b> Case Study 1: More Results from Note Taking Studies</a>
<ul>
<li class="chapter" data-level="5.1" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#conceptual-memory-data-from-urry-et-al.-2021"><i class="fa fa-check"></i><b>5.1</b> Conceptual Memory Data from Urry et al. (2021)</a></li>
<li class="chapter" data-level="5.2" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#why-are-experiments-replicated"><i class="fa fa-check"></i><b>5.2</b> Why are Experiments Replicated?</a></li>
<li class="chapter" data-level="5.3" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#conceptual-memory-data-from-mueller-and-oppenheimer-2014"><i class="fa fa-check"></i><b>5.3</b> Conceptual Memory Data from Mueller and Oppenheimer (2014)</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#preparing-the-data"><i class="fa fa-check"></i><b>5.3.1</b> Preparing the Data</a></li>
<li class="chapter" data-level="5.3.2" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.3.2</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="5.3.3" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#inferential-analysis"><i class="fa fa-check"></i><b>5.3.3</b> Inferential Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="case-study-1-more-results-from-note-taking-studies.html"><a href="case-study-1-more-results-from-note-taking-studies.html#summary-3"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Statistics for Experimental Psychology with <code>R</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="short-introduction-to-r-and-the-tidyverse" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Short Introduction to <code>R</code> and the <code>tidyverse</code></h1>
<p>As empirical scientists our believes should be based on empirical evidence that comes in the form of data. Consequently, a central skill for researchers is the ability to process and analyse data. For this we will be using the statistical programming language <a href="https://cran.r-project.org/"><code>R</code></a>.</p>
<div id="what-is-r" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> What is <code>R</code>?</h2>
<p><code>R</code> is a comprehensive tool that enables the skilled user to perform all steps or tasks of a data analysis with it. For example, with <code>R</code> we can:</p>
<ul>
<li>Prepare data for analysis: read data that comes in pretty much any format, data manipulation, and data wrangling</li>
<li>Explore data using summary statistics and graphical summaries: exploratory data analysis, descriptive statistics, and data visualisation</li>
<li>Perform statistical analysis of the data: inferential statistics</li>
<li>Communicate the results: publication-ready results graphics, <a href="https://rmarkdown.rstudio.com/">research reports that combine narrative text and statistical results</a></li>
<li>And much more such as: data simulations and advanced statistical methods, <a href="https://www.statlearning.com/">machine learning</a>, <a href="https://shiny.rstudio.com/">interactive data visualisations</a>, <a href="https://bookdown.org/yihui/blogdown/">websites</a>, <a href="https://bookdown.org/home/">books</a> (such as the present one)</li>
</ul>
<p>On top of this incredible list of things that can be done with <code>R</code>, <code>R</code> is <em>free software</em> (sometimes also known as <em>open source software</em>). This means, not only is <code>R</code> completely free to download, install, and use, you are also free to inspect its source code or make changes to it (as long as you do not make your version of <code>R</code> un-free).</p>
<p>Given the flexibility of all the things you can do with <code>R</code>, it is not completely surprising that it requires some effort to start with <code>R</code>. Especially if <code>R</code> is your first real experience of learning a programming language.</p>
<p>The important thing to know for any new <code>R</code> user is that the beginning is hard for almost everyone (including the present author). So the most important message is to hang in there and keep on trying. In all likelihood, there will be at least some rather frustrating situations in your first weeks of interacting with <code>R</code>, but <strong>it will get better</strong>. I have taught <code>R</code> to many users with a great variety of backgrounds and experiences and many of them have struggled in some way in the beginning, but for anyone who kept up their hopes and continued to put in the time and effort their struggles were not in vain. You can learn <code>R</code> if you just do not give up and believe in yourself. Be assured I believe in you. Learning <code>R</code> is such an incredibly powerful skill that will surely have a positive effect on whatever comes later in your life, be it a career in Academia (i.e., at a university) or in “the real world” (as we academics like to call everything that is not a university job).</p>
</div>
<div id="getting-started-with-r" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Getting Started with <code>R</code></h2>
<p>With this somewhat scary introduction out of the way, the next important question is probably how do you get going with <code>R</code>? Providing a comprehensive answer to this question is beyond the scope of the present work. Instead, we will shortly provide pointers to other freely accessible resources that provide introductions for different levels of prior experiences. Before that, I feel it is important to highlight that the basic <code>R</code> software that performs the calculations and can be installed from <a href="https://cran.r-project.org/index.html">CRAN</a>, the Comprehensive R Archive Network, is particularly bare bone. Therefore, in addition to <code>R</code> I also recommend you install <a href="https://www.rstudio.com/products/rstudio/"><code>RStudio</code></a>. <code>RStudio</code> is the most popular IDE – that is, integrated development environment – for <code>R</code> that makes using it quite a bit more comfortable. Also note that both <code>R</code> and <code>RStudio</code> need to be updated independently of each other. Especially <code>R</code> should be updated at least once per year from <a href="https://cran.r-project.org/index.html">CRAN</a>. So if you already have <code>R</code> installed on your computer and do not remember the last time you have updated, now is probably a good time to do so. I personally update <code>R</code> usually within a few weeks of a new version appearing.</p>
<p>The following provides an overview of resources to get started with <code>R</code> with a brief explanations of what it offers:</p>
<ul>
<li><p><a href="https://psyr.djnavarro.net/index.html"><code>R</code> for Psychological Science</a> by Danielle Navarro. This is a series of websites that provide an introduction to the basic concepts of <code>R</code> and my recommended introductory resource. At the time of writing it is not yet complete (i.e., still in progress), but what is there is excellent. It will guide you through all the steps of getting to know <code>R</code> and learn the basics. As an introductory resource I recommend you check out:</p>
<ul>
<li><a href="https://psyr.djnavarro.net/index.html#core-toolkit">Part 1, the “core toolkit”</a> covers <code>R</code> installation, variables and data types, scripts, packages, and basic programming concepts, such as loops, branches, and functions. I recommend you go through all sections of Part 1 as the first thing of getting started with <code>R</code>.</li>
<li><a href="https://psyr.djnavarro.net/index.html#working-with-data">Part 2, the “working with data”</a> covers more complex data types, most importantly <code>R</code>’s central data type, the <code>data.frame</code>, and already provides an introduction to the <code>tidyverse</code>, which will also be used here. I recommend you at least go through <a href="https://psyr.djnavarro.net/prelude-to-data.html">the prelude</a> and <a href="https://psyr.djnavarro.net/data-types.html">data types</a> (pay special attention to <code>dataframe</code>s). It discussed many of the issue also relevant for the present work.<br />
</li>
</ul></li>
<li><p>In case you prefer video introductions instead of reading text, Danielle Navarro has also published a series of awesome <a href="https://slides.djnavarro.net/">video lectures</a> to some introductory topics. For getting started with <code>R</code> I recommend:</p>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLRPB0ZzEYegOZivdelOuEn-R-XUN-DOjd">Installing <code>R</code></a>: Downloading and installing <code>R</code> with specific videos for each operating system</li>
<li><a href="https://www.youtube.com/playlist?list=PLRPB0ZzEYegPiBteC2dRn95TX9YefYFyy">Project structure</a>: This provides a great overview and introduction to a topic that is fundamental to working with computers beyond <code>R</code>: working with the file system. It covers naming files, file paths, folders, and related technical stuff that is very important when programming, but not often taught explicitly.</li>
</ul></li>
<li><p><a href="https://psyteachr.github.io/msc-conv/">MSc Conversion: R Research Methods book</a> by Emily Nordmann is a book with accompanying <a href="https://www.youtube.com/playlist?list=PLMGjq7JynlJmBbomo-_lIqJ4qWcuHcy_z">video lectures</a>. This book is aimed at a similar audience as the present book. However, the books focuses on a few concepts that we do not use here (e.g., <code>RMarkdown</code>, accessing <code>R</code> that runs on a server). The book is part of the <a href="https://psyteachr.github.io/">psychTeachR</a> book plus video series developed by the University of Glasgow that contains a few more interesting books such as <a href="https://psyteachr.github.io/data-skills-v1/">Data Skills: psyTeachR Books</a> which is very introductory.</p></li>
<li><p><a href="https://learningstatisticswithr.com/">Learning Statistics with <code>R</code></a> also by Danielle Navarro (as you can see, I am a big fan of Danielle’s work). This is a completely free introductory book to statistics using <code>R</code>, which can be downloaded from its website (the <a href="https://learningstatisticswithr.com/lsr-0.6.pdf">currently available version is 0.6</a>). Part II (i.e., Chapters 3 and 4) provides a gentle and comprehensive introduction to <code>R</code> for newcomers. From installing <code>R</code> and <code>RStudio</code>, navigating the console and <code>RStudio</code> windows, basic data types, reading in data and the file system, to the most important data types, <code>data.frames</code>, these roughly 70 pages (i.e., pp. 35 - 109) have you covered. Once you had a look at these two chapters, Chapter 8 is a great next step as it introduces <code>R</code> scripts. If you are completely new to statistics, Chapter 5 also provides a great introduction to other important concepts. One downside of this resource is that it comes in the form of a PDF and not a website, so cannot be read comfortably on all devices (but great for printing). Also note that <a href="https://psyr.djnavarro.net/index.html"><code>R</code> for Psychological Science</a> is an updates version of this book, so I would probably start with that first. Finally, note that the present book has a somewhat different conceptual focus for introducing statistical tests and methods (i.e., especially compared to Part IV).</p></li>
<li><p>If you prefer an introduction that has a stronger programming focus, I recommend the free book <a href="https://rstudio-education.github.io/hopr/">Hands-On Programming with <code>R</code></a> by Garrett Grolemund. Chapters 1 to 5 (i.e., pp. 1 - 99) also provide an introduction that starts with installing <code>R</code> in a gentle manner and then introduces the necessary basic concepts including the different data types and <code>data.frame</code>s.</p></li>
</ul>
<p>To sum this long list up, as a minimum to get through this book it is recommended to go through all sections of <a href="https://psyr.djnavarro.net/index.html#core-toolkit">Part 1</a> (especially chapters <a href="https://psyr.djnavarro.net/getting-started.html">1</a>, <a href="https://psyr.djnavarro.net/variables.html">2</a>, <a href="https://psyr.djnavarro.net/scripts.html">3</a>, <a href="https://psyr.djnavarro.net/packages.html">4</a>, <a href="https://psyr.djnavarro.net/workspaces.html">5</a>, <a href="https://psyr.djnavarro.net/vectors.html">6</a>, and <a href="https://psyr.djnavarro.net/file-system.html">11</a>) and at least the <a href="https://psyr.djnavarro.net/data-types.html#132_Data_frames"><code>data.frame</code>s chapter (Chapter 13)</a> of <a href="https://psyr.djnavarro.net/index.html#working-with-data">Part 2</a> of Danielle Navarro’s <a href="https://psyr.djnavarro.net/index.html"><code>R</code> for Psychological Science</a>. If you are not yet super comfortable with the file system on your computer, I also recommend you check out Danielle Navarro’s video lecture on <a href="https://www.youtube.com/playlist?list=PLRPB0ZzEYegPiBteC2dRn95TX9YefYFyy">project structure</a>.</p>
</div>
<div id="rstudio-setup" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> <code>RStudio</code> Setup</h2>
<p>Our main access through <code>R</code> is through the <code>RStudio</code> IDE.</p>
</div>
<div id="a-base-r-example-session" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> A Base <code>R</code> Example Session</h2>
<p>As we have discussed in the previous chapter, the most important format of data representation is a tabular format with each column representing a single variable and typically one row per observation. Such data is represented in base <code>R</code> in a <code>data.frame</code>, the most important data format for our needs. We use the term “base <code>R</code>” here to refer to using <code>R</code> without any additional packages. Let us quickly recap how a <code>data.frame</code> in base <code>R</code> looks like and let us do some basic operations with it that also sets the stage for using <code>R</code> scripts.</p>
<div id="data-files-scripts-and-working-directory" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Data Files, Scripts, and Working Directory</h3>
<p>In this chapter, we are mainly working with the data from <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> we have introduced in detail in Section <a href="role-of-statistics-in-the-research-process.html#alternative-explanation-loss-aversion-or-loss-seeking">1.2.2</a>. The data consists of two data files each representing a separate experiment we have discussed together so far as they are exact replications of another. In <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> these are reported as Experiments 1a and 1b. The original data files sent to me by Lukasz Walasek were Excel files (which can be found here: <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.xlsx">Experiment 1a</a> and <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.xlsx">Experiment 1b</a>).</p>
<p>As base <code>R</code> does not allow to read in Excel files, I have opened the original data files of <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> in Excel and saved them as <code>.csv</code> files (i.e., comma separated files) which can be downloaded from here: <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.csv">Experiment 1a</a> and <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1b.csv">Experiment 1b</a>. I recommend you download these files and save them in some folder so you can access them from within <code>R</code>.</p>
<p>To follow along with the upcoming <code>R</code> code, save the downloaded data files in a folder named <code>data</code> that is in your current <code>R</code> working directory. I also recommend you create a new empty <a href="https://psyr.djnavarro.net/scripts.html"><code>R</code> script</a> and also save it in the working directory. For example, say you already have already created a folder for this book/class, let’s assume this folder is called <code>stats_r_intro-stuff</code> and in some easy to find location (e.g., depending on your operating system the <code>My Documents</code> folder or your home folder <code>~</code>). Let’s assume you want this folder to be your working directory. Then, you create a new folder in this folder, called <code>data</code> (i.e., <code>stats_r_intro-stuff/data</code>), and download the two data files (<a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.csv">Experiment 1a</a> and <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1b.csv">Experiment 1b</a>) into this folder. Next you create an empty <code>R</code> script in this folder for this chapter, say <code>tidyverse-intro.R</code> (i.e., it is now <code>stats_r_intro-stuff/tidyverse-intro.R</code>). You can now easily set your current <code>R</code> session to this folder as your working directory by opening <code>tidyverse-intro.R</code> in <code>RStudio</code> (if it is not yet opened) and the using the menu: <code>Session</code> - <code>Set Working Directory</code> - <code>To Source File Location</code>. This sets your working directory to the folder (i.e., location) in which thr currently active <code>R</code> script is located, which should be your <code>stats_r_intro-stuff</code> folder. Note, if you have been using the current <code>R</code> session already for some time, now is a good time to restart the session (not necessarily <code>RStudio</code>) by using the menu again: <code>Session</code> - <code>Restart R</code>.</p>
<p>The workflow laid out in the previous paragraph represents my general recommendation for working with <code>R</code> at this stage. Have a folder that is your designated project folder. In this folder you have your <code>R</code> scripts as well as a sub folder for the data. Then you can open a script in <code>RStudio</code> and set the folder to be your working directory through the menu (i.e., <code>Session</code> - <code>Set Working Directory</code> - <code>To Source File Location</code>). You can then access the data files simply by accessing <code>data/my-data.file.csv</code>. Importantly, don’t forget to restart the <code>R</code> session before starting something new through the menu: <code>Session</code> - <code>Restart R</code>.</p>
</div>
<div id="read-data-and-inspecting-it" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Read Data and Inspecting it</h3>
<p>With this set-up steps out of the way, we can now load in the data from Experiment 1a using base <code>R</code>’s <code>read.csv()</code> function:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb1-1" aria-hidden="true" tabindex="-1"></a>df1a <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ws2015_exp1a.csv&quot;</span>)</span></code></pre></div>
<p>This should read in the data file without any warnings or problems.<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> If for some reason you fail to download the file or set the correct working directory, you can also try to read it directly from the internet as in the following code. But please only do that after you have tried downloading and dealing with the actual file. Handling data files and working directories is an important <code>R</code> skill you need to acquire.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb2-1" aria-hidden="true" tabindex="-1"></a>df1a <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.csv&quot;</span>)</span></code></pre></div>
<p>The first thing we usually want to do with a <code>data.frame</code> is to inspect its structure using the <code>str()</code> function. It lists all the variables, their data types, and the number of observations and variables.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1a)</span>
<span id="cb3-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    22912 obs. of  6 variables:</span></span>
<span id="cb3-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ subno    : int  8 8 8 8 8 8 8 8 8 8 ...</span></span>
<span id="cb3-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ loss     : int  6 6 6 6 6 6 6 6 8 8 ...</span></span>
<span id="cb3-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ gain     : int  6 8 10 12 14 16 18 20 6 8 ...</span></span>
<span id="cb3-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ response : chr  &quot;accept&quot; &quot;accept&quot; &quot;accept&quot; &quot;accept&quot; ...</span></span>
<span id="cb3-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ condition: num  20.2 20.2 20.2 20.2 20.2 20.2 20.2 20.2 20.2 20.2 ...</span></span>
<span id="cb3-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ resp     : int  1 1 1 1 1 1 1 1 0 1 ...</span></span></code></pre></div>
<p>In the present case we have over 20 thousand observations on six variables. Most of the variables are <code>int</code> which means integers; that is, numeric variables consisting of whole numbers (i.e., discrete values). We also have one <code>num</code> – that is, numeric – variable (i.e., numeric variable with decimal values), <code>condition</code>. In general, <code>int</code> and <code>num</code> variables are treated in the same way, as numeric variables, so there is hardly ever a reason to transform one into the other. Finally, <code>condition</code> is a <code>chr</code> or character variable.</p>
</div>
<div id="transforming-categorical-variables-into-factors" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Transforming Categorical Variables into Factors</h3>
<p>As discussed in Section <a href="research-designs.html#data-types">2.2</a>, some of the numeric variables as well as <code>condition</code> are actually categorical variables, or <code>Factor</code>s in <code>R</code> parlance. We can transform variables into <code>Factor</code>s using the apptly named <code>factor()</code> function. We general use <code>factor()</code> instead of other methods (e.g., function <code>as.factor()</code>) because it allows us to specify the ordering of the factor levels and potentially other labels for the factor levels. Let us do so for three variables now, <code>subno</code>, <code>response</code>, and <code>condition</code>. For this we use the <code>$</code> operator to access variables of a <code>data.frame</code>. After transforming the variables we take another look at the structure of the <code>data.frame</code> using <code>str()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-1" aria-hidden="true" tabindex="-1"></a>df1a<span class="sc">$</span>subno <span class="ot">&lt;-</span> <span class="fu">factor</span>(df1a<span class="sc">$</span>subno)</span>
<span id="cb4-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-2" aria-hidden="true" tabindex="-1"></a>df1a<span class="sc">$</span>response <span class="ot">&lt;-</span> <span class="fu">factor</span>(df1a<span class="sc">$</span>response, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;reject&quot;</span>, <span class="st">&quot;accept&quot;</span>))</span>
<span id="cb4-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-3" aria-hidden="true" tabindex="-1"></a>df1a<span class="sc">$</span>condition <span class="ot">&lt;-</span> <span class="fu">factor</span>(df1a<span class="sc">$</span>condition, </span>
<span id="cb4-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="fl">40.2</span>, <span class="fl">20.2</span>, <span class="fl">40.4</span>, <span class="fl">20.4</span>), </span>
<span id="cb4-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-$20/+$40&quot;</span>, <span class="st">&quot;-$20/+$20&quot;</span>, <span class="st">&quot;-$40/+$40&quot;</span>, <span class="st">&quot;-$40/+$20&quot;</span>))</span>
<span id="cb4-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1a)</span>
<span id="cb4-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    22912 obs. of  6 variables:</span></span>
<span id="cb4-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ subno    : Factor w/ 358 levels &quot;5&quot;,&quot;8&quot;,&quot;13&quot;,&quot;24&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...</span></span>
<span id="cb4-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ loss     : int  6 6 6 6 6 6 6 6 8 8 ...</span></span>
<span id="cb4-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ gain     : int  6 8 10 12 14 16 18 20 6 8 ...</span></span>
<span id="cb4-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ response : Factor w/ 2 levels &quot;reject&quot;,&quot;accept&quot;: 2 2 2 2 2 2 2 2 1 2 ...</span></span>
<span id="cb4-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ condition: Factor w/ 4 levels &quot;-$20/+$40&quot;,&quot;-$20/+$20&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...</span></span>
<span id="cb4-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ resp     : int  1 1 1 1 1 1 1 1 0 1 ...</span></span></code></pre></div>
<p>We see that after running these commands, we have as expected three <code>Factor</code>s in the data. Let us take a look at each of these calls to <code>factor()</code> to understand why we call it in a different manner in each case.</p>
<ul>
<li><p>The call for <code>subno</code> only passes the variable (i.e., the <code>df1a$subno</code> vector) and no further arguments to <code>factor()</code>. As a consequence, the factor levels are ordered in an alpha-numerical increasing manner.</p></li>
<li><p>The call for <code>response</code> specifies the ordering of the factor levels using the <code>levels</code> argument to which we have passed a vector of the levels, <code>c("reject", "accept")</code> (i.e., remember, <code>c()</code> is the function for creating vectors of any kind, such as character vectors here). The reason we do this is that otherwise the factor levels would be alphabetically ordered and then <code>accept</code> would be the first level and <code>reject</code> the second level (as “a” comes before “r” in the alphabet). This would be inconsistent with <code>resp</code>, where 0 = reject and 1 = accept.</p></li>
<li><p>The call for <code>condition</code> specifies both the levels through <code>levels</code> as well as new names for the factor levels using <code>labels</code>. The labels use the ordering (i.e., potential loss first, potential gain second) we have used throughout the book and which differs from the ordering of the original <code>condition</code> (i.e., it switches the ordering to the format we are used to now). For both arguments a vector is passed, with elements mapped by position (i.e., the new label for the first level, <code>40.2</code>, is the first label, <code>-$20/+$40</code>). We again specify the ordering of factor levels here through <code>levels</code> to maintain the ordering we have used throughout with the condition that typically shows loss aversion, -$20/+$40 as first condition. If we had not done so, the first level would have been the -$20/+$20 condition (as <code>20.2</code> was the smallest number in the original vector).</p></li>
</ul>
<p>An interesting part of the three calls to the <code>factor()</code> function is that if you run it again, after you have already ran it, it will break the <code>condition</code> variable. If you try it out, you will see that all values of the <code>condition</code> variable change to <code>NA</code> if you run this call a second time. The reason for this is that the values passed through the <code>levels</code> argument need to be present in the variable. However, because we have replaced the original values with new labels, none of the original levels (i.e., <code>c(40.2, 20.2, 40.4, 20.4)</code>) is part of the variable any more. Consequently, all values are replaced by <code>NA</code> (i.e., “not available” which means missing data). To get the values back you need to reload the data using the <code>read.csv()</code> command from above and then you can run the <code>factor()</code> call again in a state in which the data was when you ran it for the first time.</p>
<p>What this shows is that you cannot assume that running a piece of code twice gives the same output in all cases. The problem here is that the code changes the data itself (i.e., values of <code>condition</code>). However, the code also assumes certain values for <code>condition</code>. Because this assumption only holds the first time you run the code, but not the second time, the second calls breaks the results in somewhat unexpected ways. So what this means is that randomly re-running code can lead to unexpected results (which are called “bugs” in programming language parlance). Therefore, instead of re-running individually pieces of code it can often help to re-start at the top of a script and re-running everything in order to ensure all data is in the state you think it is (ideally after restarting the <code>R</code> session through <code>Session</code> - <code>Restart R</code>).</p>
<p>One more tip when transforming variables into factors. It is often a bit annoying to type out the factor levels by hand, especially when it is more than say two. In this case, a handy trick to know is that you can get <code>R</code> to produce the <code>c()</code> call having all factor levels. You just need to make sure you are using the correct ordering. The heart of the trick is the <code>dput()</code> function which creates a text representation of an <code>R</code> output that can be copied from the console to your script. To use this for factors the basic structure of the call is <code>dput(unique(df$variable))</code> which returns the <code>c()</code> call for all unique elements of a variable. If you want the elements ordered you can use <code>dput(sort(unique(df$variable)))</code>. For example, to create the <code>levels</code> argument for the <code>condition</code> variable I initially executed <code>dput(sort(unique(df1a$condition)))</code> at the console which returns <code>c(20.2, 20.4, 40.2, 40.4)</code> for the original <code>df1a</code> data (i.e., before turning everything into <code>Factor</code>s). I then just copy and pasted a bit in this vector to get the ordering right (admittedly, typing might have been faster then copying and pasting, but whatever).</p>
<p>Another thing we often want to do when reading in the data is getting an overview of how it actually looks like. One way to do so that I do not recommend for <code>data.frame</code>s is just typing the name of the variable into the console (or calling just the name from the script). What this means in <code>R</code> is that the object is printed which, for large <code>data.frame</code>s, leads to hundreds or thousands of rows being printed until some printing limit is reached. An alternative is to just look at the first few rows using the <code>head()</code> function (which prints the first 6 rows per default):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df1a)</span>
<span id="cb5-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno loss gain response condition resp</span></span>
<span id="cb5-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     8    6    6   accept -$20/+$20    1</span></span>
<span id="cb5-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     8    6    8   accept -$20/+$20    1</span></span>
<span id="cb5-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     8    6   10   accept -$20/+$20    1</span></span>
<span id="cb5-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     8    6   12   accept -$20/+$20    1</span></span>
<span id="cb5-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     8    6   14   accept -$20/+$20    1</span></span>
<span id="cb5-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     8    6   16   accept -$20/+$20    1</span></span></code></pre></div>
<p>Alternatively, you can click on an object in the <code>RStudio</code> <code>Environment</code> pane which opens the data in a viewer pane. The equivalent <code>R</code> call is using <code>View(df1a)</code> which opens the same viewer. However, <code>View()</code> should only be used interactively at the console and not be in an <code>R</code> script as it requires user interaction beyond script and console (i.e., it opens the viewer). In other words, it is nice during development to get an overview of the data, but not for the final analysis script.</p>
</div>
</div>
<div id="the-tidyverse" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> The <code>tidyverse</code></h2>
<p>A popular alternative to base <code>R</code> is the <code>tidyverse</code> <span class="citation">(<a href="#ref-tidyverse2019" role="doc-biblioref">Wickham et al. 2019</a>)</span>, a selection of packages curated and in large parts developed by the <a href="https://www.rstudio.com/about/"><code>RStudio</code> company</a>. The mastermind behind the <code>tidyverse</code> is Hadley Wickham, the <code>RStudio</code> chief scientist and maybe the one person that can be considered an <code>R</code> superstar.<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a> Most of the core <code>tidyverse</code> packages that will be introduced below, such as <code>dplyr</code> and <code>ggplot2</code>, are his developments (even though many other have contributed to those packages as well).</p>
<p>The easiest way to access the <code>tidyverse</code> is by first installing the <code>tidyverse</code> package from <code>CRAN</code> using <code>install.packages()</code>. Note that it is a good idea to only run <code>install.packages()</code> at the console and do not put it into your <code>R</code> script. The reason for this is that you only want to execute <code>install.packages()</code> once per <code>R</code> installation or after updating <code>R</code> and not every time you run a script.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Then, you can load all <code>tidyverse</code> packages at once. This is something we will do at the top of pretty much all scripts we will be creating.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb7-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</span></span>
<span id="cb7-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; v ggplot2 3.3.5     v purrr   0.3.4</span></span>
<span id="cb7-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; v tibble  3.1.2     v dplyr   1.0.7</span></span>
<span id="cb7-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; v tidyr   1.1.3     v stringr 1.4.0</span></span>
<span id="cb7-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; v readr   1.4.0     v forcats 0.5.1</span></span>
<span id="cb7-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -- Conflicts ------------------------------------------ tidyverse_conflicts() --</span></span>
<span id="cb7-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x dplyr::filter() masks stats::filter()</span></span>
<span id="cb7-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></span></code></pre></div>
<p>When loading packages it is common that this produces some status or other messages in the console (i.e., some packages do, some don’t). For example, <code>tidyverse</code> lists the package versions of the loaded (or “attached”) packages and lists function conflicts; that is, cases in which a <code>tidyverse</code> function masks a previous loaded function with the same name. We include these messages here to show that this is normal and nothing to worry about, but will generally not later in the book (as this would get repetitive). However, note that the exact version numbers of the packages that are shown here may differ from the version numbers you see (e.g., because some packages might update meanwhile).</p>
<p>The core <code>tidyverse</code> packages are (with descriptions taken or adapted from the official websites):</p>
<ul>
<li><p><a href="https://tibble.tidyverse.org/"><code>tibble</code></a>: A modern version of the <code>data.frame</code></p></li>
<li><p><a href="https://readr.tidyverse.org/"><code>readr</code></a>: Reading data in, the <code>RStudio</code> way.</p></li>
<li><p>Data wrangling with <a href="https://magrittr.tidyverse.org/"><code>magrittr</code></a>, <a href="https://tidyr.tidyverse.org/"><code>tidyr</code></a>, and <a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a>: Coherent set of functions for tidying, transforming, and working with rectangular data. Supersedes many base <code>R</code> functions and makes common problems easy.</p></li>
<li><p><a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>: System for data visualization.</p></li>
<li><p><a href="https://purrr.tidyverse.org/"><code>purr</code></a> and <a href="https://broom.tidymodels.org/"><code>broom</code></a>: Advanced modelling with the <code>tidyverse</code> and <a href="https://broom.tidymodels.org/"><code>tidymodels</code></a> which will not be discussed here.</p></li>
</ul>
<p>In the following we provide a short introduction to the core components of the <code>tidyverse</code> as they are needed for this book. A more comprehensive introduction is provided in the Wickham and Grolemund book “R for Data Science” which is available freely at <a href="http://r4ds.had.co.nz" class="uri">http://r4ds.had.co.nz</a>. To get a good grip on the <code>tidyverse</code>, I highly recommend working through chapters 1 to 21, or better 1 to 25 (the chapters in “R for Data Science” are a lot shorter than the chapters in the present book).</p>
<div id="tibble-and-readr" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> <code>tibble</code> and <code>readr</code></h3>
<p>The back bone of the <code>tidyverse</code> is the <a href="https://tibble.tidyverse.org/"><code>tibble</code></a>, or <code>tbl_df</code> (it’s <code>class</code> name in <code>R</code>), “a modern reimagining of the <code>data.frame</code>, keeping what time has proven to be effective, and throwing out what is not” (quote from <a href="https://tibble.tidyverse.org/"><code>tibble</code> documentation</a>). The main difference between <code>data.frame</code> and <code>tibble</code> in daily use is that <code>tibble</code>s do not try to print all rows and columns and thus do not overwhelm the console when just entering the name of the data at the console. This feature alone is enough for me to prefer <code>tibble</code>s over <code>data.frame</code>s. When working on an analysis one often wants to have a quick look at the data to see what has happened and the easiest way to do that is often to just enter the name of the data into the console. With <code>data.frame</code>s this regularly clutters the console and with <code>tibble</code>s it does not.</p>
<p>To convert a <code>data.frame</code> into a <code>tibble</code> you can use the <code>as_tibble()</code> function. Let us do this for our existing <code>data.frame</code> of <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span>, <code>df1a</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(df1a)</span>
<span id="cb8-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-2" aria-hidden="true" tabindex="-1"></a>tbl1a</span>
<span id="cb8-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 22,912 x 6</span></span>
<span id="cb8-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno  loss  gain response condition  resp</span></span>
<span id="cb8-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb8-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 8         6     6 accept   -$20/+$20     1</span></span>
<span id="cb8-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 8         6     8 accept   -$20/+$20     1</span></span>
<span id="cb8-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 8         6    10 accept   -$20/+$20     1</span></span>
<span id="cb8-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 8         6    12 accept   -$20/+$20     1</span></span>
<span id="cb8-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 8         6    14 accept   -$20/+$20     1</span></span>
<span id="cb8-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 8         6    16 accept   -$20/+$20     1</span></span>
<span id="cb8-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 22,906 more rows</span></span></code></pre></div>
<p>In the output of the <code>tibble</code> we can see two things. First, the output only shows the first 6 rows. Compare this to what happens when typing <code>df1a</code> in the console which will print many more rows (so you cannot any more see the column names). Second, the data type of each column is shown below the column names. This is another feature that makes <code>tibble</code>s more convenient in everyday use. We directly see that for example <code>subno</code> is a <code>Factor</code> (or <code>&lt;fct&gt;</code>) as it should be.</p>
<p>An alternative way to creating a <code>tibble</code> instead of a standard <code>data.frame</code> is by loading the data using the <code>tidyverse</code> specific read functions which are in the <a href="https://readr.tidyverse.org/"><code>readr</code></a> package. Remember that above we used the base <code>R</code> read function <code>read.csv()</code>, which is one of a handful of base <code>R</code> data read in functions such as <code>read.table()</code> (for reading data separated by spaces) and <code>read.delim()</code> (for reading tab separated data). <code>readr</code> offers a similar set of functions where the main differences are that instead of using a <code>.</code> in the function name they use an <code>_</code> and instead of a <code>data.frame</code> they return a <code>tibble</code>. So in case you have a <code>csv</code> file, you could use <code>read_csv()</code> instead of <code>read.csv()</code>. Note that in this and in the following code chunks we are going to override the existing <code>tbl1a</code> object to not clutter the work space.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ws2015_exp1a.csv&quot;</span>)</span>
<span id="cb9-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -- Column specification --------------------------------------------------------</span></span>
<span id="cb9-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb9-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno = col_double(),</span></span>
<span id="cb9-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   loss = col_double(),</span></span>
<span id="cb9-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   gain = col_double(),</span></span>
<span id="cb9-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   response = col_character(),</span></span>
<span id="cb9-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition = col_double(),</span></span>
<span id="cb9-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   resp = col_double()</span></span>
<span id="cb9-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb9-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-12" aria-hidden="true" tabindex="-1"></a>tbl1a</span>
<span id="cb9-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 22,912 x 6</span></span>
<span id="cb9-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno  loss  gain response condition  resp</span></span>
<span id="cb9-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb9-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     8     6     6 accept        20.2     1</span></span>
<span id="cb9-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     8     6     8 accept        20.2     1</span></span>
<span id="cb9-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     8     6    10 accept        20.2     1</span></span>
<span id="cb9-19"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     8     6    12 accept        20.2     1</span></span>
<span id="cb9-20"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     8     6    14 accept        20.2     1</span></span>
<span id="cb9-21"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     8     6    16 accept        20.2     1</span></span>
<span id="cb9-22"><a href="short-introduction-to-r-and-the-tidyverse.html#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 22,906 more rows</span></span></code></pre></div>
<p>What we can see from the output is that <code>read_csv()</code> not only returns the <code>tibble</code>, but also a message showing the column specification (i.e., data type for each column). This message is actually a call to the <code>cols()</code> function that could be copied and modified to change the column specification when reading in the data. For example, if we wanted to change <code>subno</code> we could do so directly here:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ws2015_exp1a.csv&quot;</span>, </span>
<span id="cb10-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb10-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">subno =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb10-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">loss =</span> <span class="fu">col_double</span>(),</span>
<span id="cb10-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">gain =</span> <span class="fu">col_double</span>(),</span>
<span id="cb10-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">response =</span> <span class="fu">col_character</span>(),</span>
<span id="cb10-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">condition =</span> <span class="fu">col_double</span>(),</span>
<span id="cb10-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">resp =</span> <span class="fu">col_double</span>()</span>
<span id="cb10-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-9" aria-hidden="true" tabindex="-1"></a>                  ))</span>
<span id="cb10-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-10" aria-hidden="true" tabindex="-1"></a>tbl1a</span>
<span id="cb10-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 22,912 x 6</span></span>
<span id="cb10-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno  loss  gain response condition  resp</span></span>
<span id="cb10-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb10-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 8         6     6 accept        20.2     1</span></span>
<span id="cb10-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 8         6     8 accept        20.2     1</span></span>
<span id="cb10-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 8         6    10 accept        20.2     1</span></span>
<span id="cb10-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 8         6    12 accept        20.2     1</span></span>
<span id="cb10-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 8         6    14 accept        20.2     1</span></span>
<span id="cb10-19"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 8         6    16 accept        20.2     1</span></span>
<span id="cb10-20"><a href="short-introduction-to-r-and-the-tidyverse.html#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 22,906 more rows</span></span></code></pre></div>
<p>We could do something similar also for <code>response</code> and <code>condition</code>, but one issue is that the function for defining <code>Factor</code>s within <code>readr</code>, <code>col_factor()</code>, only allows a <code>level</code> argument and not a <code>labels</code> argument (see <code>?cols</code>). So to get the same factor structure as above, we will need to use the <code>factor()</code> function in a similar way as above, which we will show below.</p>
<p>Another feature of <code>readr</code> compared to the corresponding base <code>R</code> functions is that it is a bit more restrictive in some cases. That is, in case the data is not as expected by a particular read function, <code>readr</code> fails more often than base <code>R</code>. Whereas this can appear annoying while programming, it has the benefit that one learns of problems in the data early compared to late. In other words, <code>readr</code> function are more likely than base <code>R</code> functions to ensure the data looks like you expect it to look like. And if your data is more likely to look like you expect it to look like, your code will be less likely to produce incorrect results.</p>
<p>Therefore, in addition to using <code>read_csv()</code> instead of <code>read.csv()</code>, it is often better to use <code>read_table()</code> instead of <code>read.table()</code> for space separated data (or <code>read_table2()</code> if the data format is a bit sloppy), <code>read_tsv()</code> instead of <code>read.delim()</code> for tab separated data, or <code>read_delim()</code> if you want to specify the data delimiter.</p>
</div>
<div id="the-pipe" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> The Pipe: <code>%&gt;%</code></h3>
<p>One of the coolest features and at the time novel features of the <code>tidyverse</code> is the pipe, which is the name of the <code>%&gt;%</code> operator.<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a> To understand what it does and why it is so great, it makes sense to begin by taking a step back and thinking a bit about functions and evaluation order in <code>R</code>.</p>
<p>One of the most important features of <code>R</code> is that we can use the result (or output) from one operation and use it as the input of another operation. For example, remember that the <code>loss</code> column in the data of <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> shows the potential loss for each of the lotteries, these losses range from $6 to $40. Now imagine that for some reason we want to know the midpoint between minimum and maximum loss (which is $23 in the present case). One way to calculate those is by taking the mean of the minimum and maximum. To get this in <code>R</code> we would need to do two steps: get the minimum and maximum potential loss from the vector of losses and then taking the mean of the minimum and maximum. We can get the minimum and maximum of a vector using the <code>range()</code> function and the mean is obtained using the <code>mean()</code> function. So to do so in <code>R</code> for our vector of all potential losses, <code>tbl1a$loss</code>, we could do:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># step 1: get minimum and maximum and save in temporary variables</span></span>
<span id="cb11-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">range</span>(tbl1a<span class="sc">$</span>loss)</span>
<span id="cb11-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-3" aria-hidden="true" tabindex="-1"></a>tmp <span class="co"># print minimum and maximum, to check everything is okay</span></span>
<span id="cb11-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  6 40</span></span>
<span id="cb11-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#step 2: calculate mean of minimum and maximum:</span></span>
<span id="cb11-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(tmp)</span>
<span id="cb11-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 23</span></span></code></pre></div>
<p>This code above does this two step calculation explicitly and saves the results of the first step in a temporary variable we have called <code>tmp</code>. We could also combine both steps into one by passing the results of the first step to the <code>mean()</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">range</span>(tbl1a<span class="sc">$</span>loss))</span>
<span id="cb12-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 23</span></span></code></pre></div>
<p>We first get the minimum and maximum (i.e., the range) and then pass this to the <code>mean()</code> function. As the mean function is the last operation we want it is the outermost call in this bit. In other words, in <code>R</code> code that does not use the pipe, code is executed from the inside to the outside. This can make it difficult to chain many operations after each other without the need to create temporary variables as we did in the first bit.</p>
<p>In contrast to executing code from innermost to outermost, the pipe allows us to chain operations from left to right. We can start with the innermost call and pipe it to the next function using <code>%&gt;%</code>. For example, using the pipe we could do the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb13-1" aria-hidden="true" tabindex="-1"></a>tbl1a<span class="sc">$</span>loss <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">range</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span>
<span id="cb13-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 23</span></span></code></pre></div>
<p>This shows a typical pipe workflow. We start with our data, in the present case the <code>tbl1a$loss</code> vector. This data is piped to the first operation, the <code>range()</code> function. The output of this call is piped to the next operation, the <code>mean()</code> function. At the end, we get exactly the output we should get but with code that is easier to read. One feature of the pipe that makes the code particularly readable is that we can start a new line for each step in a chain.</p>
<p>The pipe also works like any regular <code>R</code> operation, so we can easily save the result from the whole chain of operation in a new object for later use. For example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb14-1" aria-hidden="true" tabindex="-1"></a>loss_midpoint <span class="ot">&lt;-</span> tbl1a<span class="sc">$</span>loss <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">range</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span>
<span id="cb14-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb14-4" aria-hidden="true" tabindex="-1"></a>loss_midpoint</span>
<span id="cb14-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 23</span></span></code></pre></div>
<p>Whereas this example may not seem overly impressive when combined with the <code>dplyr</code> functions introduced next, we can do quite a lot of neat things with the pipe. We will demonstrate this below.</p>
<p>Let us end this section with two more points that are important. First, typing the pipe (i.e., typing the characters <code>%&gt;%</code>) is annoying. If you are in <code>RStudio</code> you do not need to do it. Instead, there is a keyboard short cut for it, <code>Ctrl</code>/<code>Cmd</code> + <code>Shift</code> + <code>M</code> (i.e., on Windows/Linux <code>Ctrl</code> + <code>Shift</code> + <code>M</code> and in Mac <code>Cmd</code> + <code>Shift</code> + <code>M</code>). I highly recommend you get used to using this short cut. It is one of the few short cuts in <code>RStudio</code> I use regularly.<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a></p>
<p>Second, base <code>R</code> now has its own pipe, <code>|&gt;</code>. It works very similar to the <code>tidyverse</code> pipe (i.e., can in many situations used instead of the <code>tidyverse</code> pipe) and can be used without loading any packages. I am not using it here for the only reason that I have adapted the <code>tidyverse</code> pipe before there was a base <code>R</code> pipe and there does not seem to be many reason to prefer one over the other if the <code>tiydverse</code> is already loaded. So if you see <code>|&gt;</code> instead of <code>%&gt;%</code> somewhere, assume it does pretty much the exact same thing.</p>
</div>
<div id="dplyr" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> <code>dplyr</code></h3>
<p>Whereas the back bone of the <code>tidyverse</code> are the <code>tibble</code> and the pipe, the package that most significantly improves ones workflow is <a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a>. The core of <code>dplyr</code> are five functions that combine the most common data manipulation operations. Or to quote the <a href="">official documentation</a>: “<code>dplyr</code> is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges.” These five verbs/functions are:</p>
<ul>
<li><code>mutate()</code> adds new variables or changes variables as a function of existing variables</li>
<li><code>select()</code> picks variables based on their names</li>
<li><code>filter()</code> picks cases based on their values</li>
<li><code>summarise()</code> reduces multiple values down to a summary</li>
<li><code>arrange()</code> changes the ordering of the rows</li>
</ul>
<p>A great introduction and overview of the functionality of these functions is provided on the official <a href="https://dplyr.tidyverse.org/articles/dplyr.html">getting started</a> page, but we will do so here as well, if only somewhat briefly.</p>
<p>One important part of the <code>dplyr</code> functions is that they all are developed to work with the pipe so can be chained. Furthermore, all <code>dplyr</code> functions work with what is called <em>non-standard evaluation</em>. This means we can refer to variable names of the <code>data.frame</code>/<code>tibble</code> we are working with in any of the <code>dplyr</code> functions without enclosing them in quotes.</p>
<div id="mutate" class="section level4" number="3.5.3.1">
<h4><span class="header-section-number">3.5.3.1</span> <code>mutate()</code></h4>
<p>Let us show this behaviour here by replicating the call above to convert some variables in our data to factors. We start again by reading the data in. We then pipe this freshly read in data to the <code>mutate()</code> function to convert three variables to factors as done above and save it again in the same object, <code>tbl1a</code>. We then get an overview of the object.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ws2015_exp1a.csv&quot;</span>)</span>
<span id="cb15-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-2" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">subno =</span> <span class="fu">factor</span>(subno),</span>
<span id="cb15-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">response =</span> <span class="fu">factor</span>(response, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;reject&quot;</span>, <span class="st">&quot;accept&quot;</span>)),</span>
<span id="cb15-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">condition =</span> <span class="fu">factor</span>(condition, </span>
<span id="cb15-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="fl">40.2</span>, <span class="fl">20.2</span>, <span class="fl">40.4</span>, <span class="fl">20.4</span>), </span>
<span id="cb15-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-$20/+$40&quot;</span>, <span class="st">&quot;-$20/+$20&quot;</span>, <span class="st">&quot;-$40/+$40&quot;</span>, <span class="st">&quot;-$40/+$20&quot;</span>))</span>
<span id="cb15-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-10" aria-hidden="true" tabindex="-1"></a>tbl1a</span>
<span id="cb15-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 22,912 x 6</span></span>
<span id="cb15-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno  loss  gain response condition  resp</span></span>
<span id="cb15-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    &lt;fct&gt;     &lt;dbl&gt;</span></span>
<span id="cb15-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 8         6     6 accept   -$20/+$20     1</span></span>
<span id="cb15-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 8         6     8 accept   -$20/+$20     1</span></span>
<span id="cb15-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 8         6    10 accept   -$20/+$20     1</span></span>
<span id="cb15-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 8         6    12 accept   -$20/+$20     1</span></span>
<span id="cb15-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 8         6    14 accept   -$20/+$20     1</span></span>
<span id="cb15-19"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 8         6    16 accept   -$20/+$20     1</span></span>
<span id="cb15-20"><a href="short-introduction-to-r-and-the-tidyverse.html#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 22,906 more rows</span></span></code></pre></div>
<p>Compared to the code above in which we have changed the variables to factors, there a few changes:</p>
<ul>
<li>The block of code in which variables are converted to factors is wrapped into the <code>mutate()</code> call to which we have piped the data, <code>tbl1a</code>.</li>
<li>For each call that converts one variable to a factor, we use the <code>=</code> sign and not the assignment operator <code>&lt;-</code>. The reason for this is that all the operations are performed within the <code>mutate()</code> call. We generally only use the assignment operator <code>&lt;-</code> outside of function calls (if you try it out and replace the <code>=</code> with <code>&lt;-</code> you will see which horrible consequences this has).</li>
<li>The first two calls for changing a variable are ended by a <code>,</code>. The reason again is that we are inside one <code>mutate()</code> call so to tell mutate we are not yet done, we end one operation with a <code>,</code>.</li>
<li>Instead of passing the full vector to <code>factor()</code> as above, for example <code>df1a$subno</code>, we can refer to each variable, such as <code>subno</code>, by name (and without quotes) directly (this is what is meant with non-standard evaluation). The reason for this is that we are working within the context of the data that we have piped to the <code>mutate()</code> call.</li>
</ul>
</div>
<div id="summarise" class="section level4" number="3.5.3.2">
<h4><span class="header-section-number">3.5.3.2</span> <code>summarise()</code></h4>
<p>The second most important function from <code>dplyr</code> is <code>summarise()</code> which as the name suggests creates summaries. What this means is that we are usually reducing the number of rows in a data, often the data is reduced to one row. For example, we could use <code>summarise()</code> to get the average probability with which lotteries were accepted across all conditions and lotteries. For this we just need to take the overall mean of the <code>resp</code> variable.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb16-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 1</span></span>
<span id="cb16-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   mean_acc</span></span>
<span id="cb16-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;</span></span>
<span id="cb16-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.381</span></span></code></pre></div>
<p>We see that summarise also returns a <code>tibble</code> so the return values differs quite a bit from how one could do it in base <code>R</code> (e.g., <code>mean(tbl1a$resp)</code>). We can also see that <code>summarise()</code> works structurally quite similarly to the <code>mutate()</code>. In the <code>summarise()</code> call we can create new variables using a <code>name = operation</code> syntax. We can also create multiple summary statistics by separating them using <code>,</code>. We can also add comments to the code as usual using <code>#</code>, as long as it is to the right side of the <code>,</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_acc =</span> <span class="fu">mean</span>(resp),</span>
<span id="cb17-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_acc =</span> <span class="fu">sd</span>(resp),  <span class="do">## sd() returns the standard deviation</span></span>
<span id="cb17-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pot_loss =</span> <span class="fu">mean</span>(loss),</span>
<span id="cb17-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pot_gain =</span> <span class="fu">mean</span>(gain)</span>
<span id="cb17-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 4</span></span>
<span id="cb17-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   mean_acc sd_acc mean_pot_loss mean_pot_gain</span></span>
<span id="cb17-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb17-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.381  0.486          19.5          19.2</span></span></code></pre></div>
</div>
<div id="filter-select-and-arrange" class="section level4" number="3.5.3.3">
<h4><span class="header-section-number">3.5.3.3</span> <code>filter()</code>, <code>select()</code>, and <code>arrange()</code></h4>
<p>As we have discussed above, one of the key ways of using the <code>tidyverse</code> is by chaining different operations together. For example, we could first select only the <code>"-$20/+$40"</code> condition and then calculate the summaries for this condition. For this we pipe first to the <code>filter()</code> function and then pipe the results to the summarise function:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition <span class="sc">==</span> <span class="st">&quot;-$20/+$40&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb18-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_acc =</span> <span class="fu">mean</span>(resp),</span>
<span id="cb18-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_acc =</span> <span class="fu">sd</span>(resp),</span>
<span id="cb18-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pot_loss =</span> <span class="fu">mean</span>(loss),</span>
<span id="cb18-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pot_gain =</span> <span class="fu">mean</span>(gain)</span>
<span id="cb18-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 4</span></span>
<span id="cb18-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   mean_acc sd_acc mean_pot_loss mean_pot_gain</span></span>
<span id="cb18-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb18-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.514  0.500            13            26</span></span></code></pre></div>
<p>Note that <code>filter()</code> requires to use the <code>==</code> operator and not the <code>=</code> operator. The reason is that you do not want to set something equal to something, which is done using <code>=</code>, but want to check for equality, which is done using <code>==</code>. <code>filter()</code> also allows you to chain multiple comparisons together, either by separating them using <code>,</code> or <code>&amp;</code> (i.e., logical and). If only one of multiple conditions needs to hold you can use <code>|</code> (logical or).</p>
<p><code>filter()</code> is also the function for removing observations in the <code>tidyverse</code>. This is done by writing a filter that retains all observations but the ones you want to remove. For this you can also use the logical not operator, <code>!</code> which inverts a logical vector, or the unequal operator, <code>!=</code>.</p>
<p>For example, we discussed that what we are actually interested in in the data from <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> are the responses to the symmetric lotteries for which the potential loss is equal to the potential gain. We could select those with <code>filter()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-1" aria-hidden="true" tabindex="-1"></a>symm1 <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain)</span>
<span id="cb19-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-3" aria-hidden="true" tabindex="-1"></a>symm1</span>
<span id="cb19-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,989 x 6</span></span>
<span id="cb19-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   subno  loss  gain response condition  resp</span></span>
<span id="cb19-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    &lt;fct&gt;     &lt;dbl&gt;</span></span>
<span id="cb19-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 8         6     6 accept   -$20/+$20     1</span></span>
<span id="cb19-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 8         8     8 accept   -$20/+$20     1</span></span>
<span id="cb19-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 8        10    10 accept   -$20/+$20     1</span></span>
<span id="cb19-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 8        12    12 accept   -$20/+$20     1</span></span>
<span id="cb19-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 8        14    14 accept   -$20/+$20     1</span></span>
<span id="cb19-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 8        16    16 accept   -$20/+$20     1</span></span>
<span id="cb19-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 1,983 more rows</span></span></code></pre></div>
<p>Or equivalently:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>symm2 <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(loss <span class="sc">!=</span> gain))</span>
<span id="cb20-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(symm1, symm2)</span>
<span id="cb20-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Here, we use the <code>all.equal()</code> function to show that the two objects are the same. This function can compare arbitrary <code>R</code> objects and only returns <code>TRUE</code> if two objects are the same.</p>
<p>One problem with the filter is used above is that there are more symmetric lotteries than those that occur in all conditions. The following code, which shows all symmetric lotteries for each condition, demonstrates this.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(loss, gain, condition) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(condition) <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span>
<span id="cb21-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 22 x 3</span></span>
<span id="cb21-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     loss  gain condition</span></span>
<span id="cb21-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    </span></span>
<span id="cb21-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1    12    12 -$20/+$40</span></span>
<span id="cb21-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2    16    16 -$20/+$40</span></span>
<span id="cb21-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3    20    20 -$20/+$40</span></span>
<span id="cb21-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     6     6 -$20/+$20</span></span>
<span id="cb21-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     8     8 -$20/+$20</span></span>
<span id="cb21-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6    10    10 -$20/+$20</span></span>
<span id="cb21-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7    12    12 -$20/+$20</span></span>
<span id="cb21-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8    14    14 -$20/+$20</span></span>
<span id="cb21-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9    16    16 -$20/+$20</span></span>
<span id="cb21-19"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10    18    18 -$20/+$20</span></span>
<span id="cb21-20"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11    20    20 -$20/+$20</span></span>
<span id="cb21-21"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12    12    12 -$40/+$40</span></span>
<span id="cb21-22"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13    16    16 -$40/+$40</span></span>
<span id="cb21-23"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14    20    20 -$40/+$40</span></span>
<span id="cb21-24"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15    24    24 -$40/+$40</span></span>
<span id="cb21-25"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16    28    28 -$40/+$40</span></span>
<span id="cb21-26"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17    32    32 -$40/+$40</span></span>
<span id="cb21-27"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18    36    36 -$40/+$40</span></span>
<span id="cb21-28"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19    40    40 -$40/+$40</span></span>
<span id="cb21-29"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20    12    12 -$40/+$20</span></span>
<span id="cb21-30"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21    16    16 -$40/+$20</span></span>
<span id="cb21-31"><a href="short-introduction-to-r-and-the-tidyverse.html#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22    20    20 -$40/+$20</span></span></code></pre></div>
<p>In particular, the output shows that in the asymmetric conditions, -$20/+$40 and -$40/+$20, we only have three symmetric lotteries, whereas in the two symmetric conditions we have quite a lot more. However, the three symmetric lotteries that appear in the asymmetric conditions, 12-12, 16-16, and 20-20, appear in all conditions.</p>
<p>Before focussing on how we can build a better filter, let us first see how the code above exactly did what it did. We again first filter all symmetric lotteries. From this data we then retain or <code>select()</code> only the <code>loss</code>, <code>gain</code>, and <code>condition</code> columns. We then use the <code>unique()</code> function to only retain the unique rows. Because we have a specific ordering in which we think about the conditions (which is expressed in the order of the factor levels) we then sort the <code>tibble</code> along the <code>condition</code> variable using <code>arrange()</code>. Finally, because per default a <code>tibble</code> only prints a few rows we use <code>print(n = Inf)</code> which for any <code>tibble</code> prints all rows (i.e., up to row infinity). To better understand the code, you are encouraged to run it line by line to see what the output at each intermediate step is (to get the output at a subset of lines of codes, do not select the <code>%&gt;%</code> at the end of the last line when running it).</p>
<p>So how can we select only the symmetric lotteries that appear in all conditions? There clearly are multiple possible filters to do so. The one that easiest comes to my mind is to combine the filter that selects all symmetric lotteries with a filter that only selects lotteries in which the potential loss is either 12, 16, or 20. For the latter we introduce a new operator, the <code>%in%</code> operator. It returns <code>TRUE</code> for any element of a vector that matches an element <em>in</em> another vector. For example in our case, we want to retain all those lotteries where the potential loss is <em>in</em> <code>c(12, 16, 20)</code>. This is shown below. We also include the code that shows that we now have the same set of symmetric lotteries in all conditions.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(loss, gain, condition) <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(condition) </span>
<span id="cb22-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 x 3</span></span>
<span id="cb22-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    loss  gain condition</span></span>
<span id="cb22-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    </span></span>
<span id="cb22-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    12    12 -$20/+$40</span></span>
<span id="cb22-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    16    16 -$20/+$40</span></span>
<span id="cb22-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    20    20 -$20/+$40</span></span>
<span id="cb22-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    12    12 -$20/+$20</span></span>
<span id="cb22-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    16    16 -$20/+$20</span></span>
<span id="cb22-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    20    20 -$20/+$20</span></span>
<span id="cb22-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 6 more rows</span></span></code></pre></div>
</div>
<div id="group_by" class="section level4" number="3.5.3.4">
<h4><span class="header-section-number">3.5.3.4</span> <code>group_by()</code></h4>
<p>You might remember that the main hypothesis of <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> was that it is not the absolute value of a lottery, but the relative rank, that matters for whether or not participants think a lottery is attractive. The main evidence for this hypothesis was that the proportion with which the symmetric lotteries are accepted differs across the four conditions. How could we calculate this with the <code>tiydverse</code>?</p>
<p>If we only apply what we know so far the only way to do so would be to split the data into four subsets using filter, and then apply <code>summarise()</code> to each of these subsets. Let us do this exemplary by only splitting the data into two subsets, one for the <code>"-\$20/+\$40"</code> condition that shows loss aversion and one for the “-$40/+$20” condition that shows loss seeking. We have to combine this filter with the filter only selecting the symmetric lotteries. To make the logic easier, we separate these two steps into separate <code>filter()</code> calls (but we could also combine them into one).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;loss aversion&quot; condition:</span></span>
<span id="cb23-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-2" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition <span class="sc">==</span> <span class="st">&quot;-$20/+$40&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb23-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 1</span></span>
<span id="cb23-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   mean_acc</span></span>
<span id="cb23-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;</span></span>
<span id="cb23-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.167</span></span>
<span id="cb23-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="do">## &quot;loss seeking&quot; condition:</span></span>
<span id="cb23-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-12" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition <span class="sc">==</span> <span class="st">&quot;-$40/+$20&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb23-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 1</span></span>
<span id="cb23-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   mean_acc</span></span>
<span id="cb23-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;</span></span>
<span id="cb23-19"><a href="short-introduction-to-r-and-the-tidyverse.html#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0.670</span></span></code></pre></div>
<p>The results show the previously discussed pattern. Participants in the -$20/+$40 condition are around 50% less likely to accept the symmetric lotteries than participants in the -$40/+$20. Whereas this is great, the code is a bit verbose and clunky. For example, the first <code>filter()</code> call and the <code>summarise()</code> call are identical in both parts. So the question is: Is there not a better way to get these results?</p>
<p>This is of course a rhetorical question and the answer is yes, there is a better way to get these results. The answer is the <code>group_by()</code> function, the function that gives <code>dplyr</code> all its power. To use <code>group_by()</code> you need to pass it one or multiple (categorical) grouping variables. <code>group_by()</code> then creates a grouped <code>tibble</code> with the consequence that if any of the further <code>dplyr</code> verbs are applied to this grouped <code>tibble</code> they are applied to each group separately. Let’s show it for our example to see what this means in practice:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb24-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 2</span></span>
<span id="cb24-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition mean_acc</span></span>
<span id="cb24-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;        &lt;dbl&gt;</span></span>
<span id="cb24-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -$20/+$40    0.167</span></span>
<span id="cb24-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 -$20/+$20    0.462</span></span>
<span id="cb24-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -$40/+$40    0.437</span></span>
<span id="cb24-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 -$40/+$20    0.670</span></span></code></pre></div>
<p>We can see that the output now contains the average proportion to accept the symmetric lotteries for each of the four conditions separately. So instead of first splitting the data and then calculating the summary statistics (here: mean of <code>resp</code> column) for each split by hand, <code>group_by()</code> does exactly this internally.</p>
<p>In other words, whenever we have a categorical variable in our data we can use <code>group_by()</code> to perform operations conditionally across the levels of the categorical variable. Given the ubiquity of categorical variables, at least in experiments the experimental factor is one, but other data sets also usually have at least one categorical variable, this is a huge time and effort saver.</p>
<p>And whereas we have shown this here for <code>summarise()</code>, which is probably the most common use case, this also works for the other <code>dplyr</code> verbs for which the results can depend on other rows, <code>mutate()</code> and <code>arrange()</code>.</p>
<p>In the example above, we have only passed one variable to <code>group_by()</code>, <code>condition</code>. We can also pass multiple variables. This will perform the operations conditional on the combination of both variables. For example, here we have selected exactly the lotteries with the three symmetric lotteries that are the same across conditions. With <code>group_by()</code> it is easy to get the average accept proportion separately for each of these symmetric lotteries per condition:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, loss, gain) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb25-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;condition&#39;, &#39;loss&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb25-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 x 4</span></span>
<span id="cb25-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   condition, loss [12]</span></span>
<span id="cb25-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition  loss  gain mean_acc</span></span>
<span id="cb25-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb25-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -$20/+$40    12    12    0.190</span></span>
<span id="cb25-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 -$20/+$40    16    16    0.119</span></span>
<span id="cb25-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -$20/+$40    20    20    0.190</span></span>
<span id="cb25-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 -$20/+$20    12    12    0.469</span></span>
<span id="cb25-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 -$20/+$20    16    16    0.458</span></span>
<span id="cb25-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 -$20/+$20    20    20    0.458</span></span>
<span id="cb25-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 6 more rows</span></span></code></pre></div>
<p>Note that pretty much the same result would be obtained if only passing one of the <code>gain</code>/<code>loss</code> variable pair to <code>group_by()</code> here. Feel free to try it out.</p>
<p>The results are not straight forward to interpret as they do not show a consistent pattern across conditions. For the symmetric conditions the difference in acceptance rate seems to be small. However, for the asymmetric conditions we see somewhat more noticeable differences that suggest that the 16-16 lottery may have somewhat lower acceptance rates than both the 12-12 and 20-20 lottery. However, as these are only descriptive results without any additional inferential statistical evidence, it is very much possible that this small differences within conditions reflects pure noise and should not be taken too seriously.</p>
<p>Before ending this section on <code>group_by()</code>, there is one more thing to discuss. As shown in the output above, <code>summarise()</code> still returns a grouped <code>tibble</code> in case one calls <code>group_by()</code> initially with more than one variable. This can be seen by both the status message “<code>summarise()</code> has grouped output by …” and because the output still shows <code># Groups: ...</code>. This means that if we were to do any further operations on this result it would still be performed grouped. To remove the grouping created by <code>group_by()</code> use the <code>ungroup()</code> function as shown next.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-1" aria-hidden="true" tabindex="-1"></a>tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, loss, gain) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb26-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;condition&#39;, &#39;loss&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb26-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 x 4</span></span>
<span id="cb26-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition  loss  gain mean_acc</span></span>
<span id="cb26-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb26-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -$20/+$40    12    12    0.190</span></span>
<span id="cb26-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 -$20/+$40    16    16    0.119</span></span>
<span id="cb26-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -$20/+$40    20    20    0.190</span></span>
<span id="cb26-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 -$20/+$20    12    12    0.469</span></span>
<span id="cb26-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 -$20/+$20    16    16    0.458</span></span>
<span id="cb26-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 -$20/+$20    20    20    0.458</span></span>
<span id="cb26-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 6 more rows</span></span></code></pre></div>
</div>
</div>
</div>
<div id="ggplot2" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> <code>ggplot2</code></h2>
<p>The perhaps most prominent member of the <code>tidyverse</code>, which technically also pre-dates the <code>tidyverse</code> by several years, is <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>, a system for declaratively creating graphics, based on the book “The Grammar of Graphics” <span class="citation">(<a href="#ref-wilkinsonGrammarGraphics1999" role="doc-biblioref">Wilkinson 1999</a>)</span>.</p>
<p>To understand what how <code>ggplot2</code> works, it makes sense to contrast it to the base <code>R</code> graphics engine around the <code>plot()</code> function. For <code>plot()</code> creating a plot is done by drawing individual graphical elements such as <code>points()</code> or <code>lines()</code>. These functions generally only accept individual vectors or data points.</p>
<p>In contrast, <code>ggplot2</code> requires that the data is passed either as a <code>data.frame</code> or <code>tibble</code>. With this in hand, “you provide the data, tell <code>ggplot2</code> how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.” (<a href="https://ggplot2.tidyverse.org/">quote from the official documentation</a>).</p>
<div id="first-ggplot2-example" class="section level3" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> First <code>ggplot2</code> Example</h3>
<p>What this means in practice is the first thing to think about is which variables in your data you want to show on which of the two axes? Once you have decided on this you have to consider which graphical elements, which are called <code>geom</code>s in <code>ggplot2</code> terminology, you want to use to show the data. Let us exemplify this with a first example from the <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> data.</p>
<p>One intuition we could have is that the probability that a lottery is accepted is related to the size of the potential gain, if we average over all other variables (i.e., potential loss and condition). One way to investigate this would be to calculate the average acceptance probability for each possible gain and plot this on the x-axis against the average accept probability on the y-axis. For this, we first summarise the data in this way.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-1" aria-hidden="true" tabindex="-1"></a>lot_sum <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gain) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acceptance =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb27-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-4" aria-hidden="true" tabindex="-1"></a>lot_sum</span>
<span id="cb27-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 13 x 2</span></span>
<span id="cb27-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    gain mean_acceptance</span></span>
<span id="cb27-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb27-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     6          0.0943</span></span>
<span id="cb27-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     8          0.138 </span></span>
<span id="cb27-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    10          0.214 </span></span>
<span id="cb27-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    12          0.222 </span></span>
<span id="cb27-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    14          0.340 </span></span>
<span id="cb27-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    16          0.326 </span></span>
<span id="cb27-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 7 more rows</span></span></code></pre></div>
<p>Looking at the returned <code>tibble</code> already shows that our intuition is probably not too off, but let us plot the data to get a better look. For this, we pass it to the <code>ggplot()</code> function as shown next.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-28-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This plot shows a clear relationship between the mean acceptance rate of a lottery and its potential gain. Let us now describe the call in detail:</p>
<ul>
<li>To create a plot with <code>ggplot2</code> we generally want to call the <code>ggplot()</code> function for which the first argument is the data we want to plot. Because the data is the first argument, we can also directly pipe into the <code>ggplot()</code> function as shown below.</li>
<li>The second argument is the <code>aes()</code> function which is used to map variables in the data onto aesthetics. In this call we only consider two aesthetics, the <code>x</code> and <code>y</code> axes. These two are probably the most important aesthetics, but we will also use other aesthetics such as <code>linetype</code>, <code>size</code>, or <code>shape</code> of the data points. In general, an aesthetic is a feature of the plot which changes as a function of the values of the variable.</li>
<li>After passing the data and specifying the aesthetics, we close the <code>ggplot()</code> call (i.e., close the opening parenthesis) and then add further arguments, which are passed as function calls, to the plot using <code>+</code>.</li>
<li>The most important set of arguments to pass are <code>geom</code>s (or geometric objects). Here we pass <code>geom_point()</code> to indicate that we want to plot all points of the data.</li>
</ul>
<p>Another important thing with <code>ggplot2</code> is that we cannot only use one <code>geom</code>, but multiple. For example, we could add a line on top connecting all the data points:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb29-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-29-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>One thing of note is that usually <code>geom_line()</code> requires the use of the <code>groups</code> aesthetic. And if all data points are connected, as in the present case, group should be 1 (i.e., <code>geom_line(aes(group = 1))</code>). So the following is equivalent in the present case, but is an idiom one should be aware of.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb30-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-30-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="two-continuous-variables" class="section level3" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Two Continuous Variables</h3>
<p>The examples above show a simple case of plotting two continuous variables, the dependent variable is shown on the y-axis and the independent variable (for this plot) on the x-axis. Let us now consider a few more cases of plotting two continuous variables, by extending the data we are looking at.</p>
<p>In the plots above we have averaged over all possible potential losses when looking at the effect of gain on average acceptance rates. We will now plot the case in which we consider each individual lottery – that is, each unique combination of potential gain and loss – as one data point (i.e., we will not average over all potential losses for one gain). Additionally, to reduce the influence of the condition manipulation we will only consider the two symmetric condition in which the range for losses is equal to the range for gains. Let us begin the analysis by preparing the corresponding data.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a>lot_sum2 <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;-$20/+$20&quot;</span>, <span class="st">&quot;-$40/+$40&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loss, gain) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acceptance =</span> <span class="fu">mean</span>(resp))</span>
<span id="cb31-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;loss&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb31-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-6" aria-hidden="true" tabindex="-1"></a>lot_sum2</span>
<span id="cb31-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 119 x 3</span></span>
<span id="cb31-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   loss [13]</span></span>
<span id="cb31-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    loss  gain mean_acceptance</span></span>
<span id="cb31-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb31-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     6     6           0.510</span></span>
<span id="cb31-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     6     8           0.615</span></span>
<span id="cb31-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     6    10           0.729</span></span>
<span id="cb31-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     6    12           0.844</span></span>
<span id="cb31-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     6    14           0.833</span></span>
<span id="cb31-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     6    16           0.906</span></span>
<span id="cb31-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 113 more rows</span></span></code></pre></div>
<p>For our first plot, we begin with the same call as above and only change the data that is passed to the <code>ggplot()</code> function.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-32-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This plot is difficult to interpret. We see that there are some lotteries with very low acceptance rates between 0 and around 0.2 as well as another group with acceptance rates between around 0.3 and 0.85. In this plot it does not look as if a larger potential gain is associated with a larger mean acceptance rates.</p>
<p>One possibility for these differing visual impressions might be that there is some overlap of data points that are near 0. That means that in the current plot we cannot differentiate between one or multiple data points that share the same or approximately same x and y coordinates. One way to allow for this differentiation is by decreasing the alpha blending value to values below 1 to create the visual impression of semi transparency. For example, we can set <code>alpha = 0.25</code> for <code>geom_point()</code> as shown below. In this plot, overlapping points appear darker whereas non-overlapping points do not.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-33-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Whereas this plot provides some evidence for over-plotting, especially for mean acceptance rates near 0 (and especially for low values of potential gains), it is still not very clear. One possibility to further improve on this figure is by introducing some random jitter for the plotted points using <code>geom_jitter()</code>. Given that the points are all on discrete x-axis points (i.e., the even whole numbers that act as potentially gains) it makes sense to only add a small amount of jitter on the x-axis (by specifying the <code>width</code> argument). This way the points retain their exact y-axis positions but are still shown around their original x-axis position.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.4</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-34-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Note that due to the randomness that is used to add the jotter, this plot will look slightly different every time it is created. This plot also makes it easier to see why we see such an effect of potential gain on mean acceptance rates when averaging over losses. There are many more data points with very low mean acceptance rates on the left side of the plot and many more data points with medium to high acceptance rates on the right side of the plot. If we imagine taking the mean of this points we can imagine a monotonically increasing mean acceptance rate.</p>
<p>However, one question that this plot leaves open is the question of why we see this qualitatively different pattern for mean acceptance rates of lotteries. Why are some so low and other larger? To elucidate this question we are going to create a new factor, <code>ev</code>, which separates the expected value of the lottery (i.e., loss plus gain) into three bins: expected value = 0 (i.e., symmetric lotteries), negative expected value (i.e., potential loss larger than potential gain), and positive expected value (potential loss smaller than potential gain).</p>
<p>To create the <code>ev</code> variable, we use another <code>dplyr</code> function, <code>case_when()</code>. <code>case_when()</code> is a vectorised variant of multiple branching (i.e., if-else). This allows to create a new variable based on multiple logical conditions in a convenient way. Each argument to <code>case_when()</code> consists of a logical statement, the <code>~</code> operator (which I call the tilde-operator), and a return value that is returned in case the logical condition is true. Here we have three logical cases which are each mapped onto one label describing the sign of the expected value. We also convert the <code>ev</code> variable into a <code>Factor</code> using <code>factor()</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-1" aria-hidden="true" tabindex="-1"></a>lot_sum2 <span class="ot">&lt;-</span> lot_sum2 <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ev =</span> <span class="fu">factor</span>(<span class="fu">case_when</span>(</span>
<span id="cb35-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-3" aria-hidden="true" tabindex="-1"></a>    gain <span class="sc">==</span> loss <span class="sc">~</span> <span class="st">&quot;EV = 0&quot;</span>,</span>
<span id="cb35-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-4" aria-hidden="true" tabindex="-1"></a>    gain <span class="sc">&lt;</span> loss <span class="sc">~</span> <span class="st">&quot;EV negative&quot;</span>,</span>
<span id="cb35-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-5" aria-hidden="true" tabindex="-1"></a>    gain <span class="sc">&gt;</span> loss <span class="sc">~</span> <span class="st">&quot;EV positive&quot;</span></span>
<span id="cb35-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-6" aria-hidden="true" tabindex="-1"></a>  )))</span>
<span id="cb35-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-7" aria-hidden="true" tabindex="-1"></a>lot_sum2</span>
<span id="cb35-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 119 x 4</span></span>
<span id="cb35-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   loss [13]</span></span>
<span id="cb35-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    loss  gain mean_acceptance ev         </span></span>
<span id="cb35-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt; &lt;fct&gt;      </span></span>
<span id="cb35-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     6     6           0.510 EV = 0     </span></span>
<span id="cb35-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     6     8           0.615 EV positive</span></span>
<span id="cb35-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     6    10           0.729 EV positive</span></span>
<span id="cb35-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     6    12           0.844 EV positive</span></span>
<span id="cb35-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     6    14           0.833 EV positive</span></span>
<span id="cb35-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     6    16           0.906 EV positive</span></span>
<span id="cb35-18"><a href="short-introduction-to-r-and-the-tidyverse.html#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 113 more rows</span></span></code></pre></div>
<p>We can then use the new <code>ev</code> variable to print points in a different colour depending on the value of the <code>ev</code> variable. For this we just need to map the <code>ev</code> variable to the <code>colour</code> aesthetic in the <code>aes()</code> call and get a very interesting plot.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance, <span class="at">colour =</span> ev)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-36-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>And whereas this plot already looks very interesting, it uses both green and red colours which can be difficult to see for individuals with colour blindness (such as me, even if my colour blindness is very mild). Therefore, we can make this plot nicer in two regards: (1) by using a somewhat nicer theme than the default which removes the grey background (e.g., my favourite is <code>theme_bw()</code>) and (2) we can use a colour blind friendly colour palette. For this we use <code>ggthemes::scale_colour_colorblind()</code> (here <code>ggthemes::</code> just means we use a a function from the <code>ggthemes</code> package without loading it explicitly beforehand). This gives us a very appealing and interesting plot.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance, <span class="at">colour =</span> ev)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb37-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb37-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-37-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This plot shows that if the expected value is negative, participants are highly unlikely to accept a lottery. If the expected value is 0 (i.e., for symmetric lotteries) the acceptance rates start out at around 0.5 for small potentials losses and gains and decrease a bit with increasing loss/gain (just as predicted by loss aversion, see Section <a href="role-of-statistics-in-the-research-process.html#evidence-for-loss-aversion-lotteries">1.2.1</a>). Finally, for lotteries with positive expected value (i.e., where on average we should win money) acceptance rate are at or above 0.5. Just as one would expect.</p>
<p>Are we done yet with this data? Not yet. There is one more trick we can use to make the plot even more informative. We can map the <code>loss</code> variable onto the size of the data points. For this, we just add <code>size = loss</code> to the <code>aes()</code> call. This allows us to further understand the pattern.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lot_sum2, <span class="fu">aes</span>(<span class="at">x =</span> gain, <span class="at">y =</span> mean_acceptance, <span class="at">colour =</span> ev, <span class="at">size =</span> loss)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb38-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_colour_colorblind</span>() <span class="sc">+</span></span>
<span id="cb38-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-38-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We can now see something that should not be too surprising. If the potential loss is small, which is now indicated by a small data point, the average acceptance rate is high. And the higher the potential gain for one specific potential loss (i.e., point size) the larger the mean acceptance rate. For each x-axis position on which we have data, we can also nicely see a size based ordering: The small losses have the largest mean acceptance rates and the large losses the smallest. In sum, even though the plot reveals a few pattern that should not be too surprising, it provides a comprehensive overview of the data of <span class="citation"><a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">Walasek and Stewart</a> (<a href="#ref-walasekHowMakeLoss2015" role="doc-biblioref">2015</a>)</span> (at least the two symmetric conditions).</p>
</div>
<div id="one-continuous-and-one-categorical-variable" class="section level3" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> One Continuous and one Categorical Variable</h3>
<p>So far we have looked at two continuous variables and seen how by mapping different variables to different aesthetics and by changing the arguments to the aesthetics, we can create appealing figures. Now we are trying to do the same for a situation that is potentially more common for experimental data. A situation with one continuous dependent variable and one categorical independent variable.</p>
<p>Before producing the data, we are going to do something we will continue to do throughout this book. We will change the default theme (i.e., the theme that will be automatically used by all plots in one <code>R</code> session unless a different theme is specifically requested) to a theme without the grey background. In this call, we also make a few more changes such as larger axes labels and remove unnecessary grid lines which I feel makes such plots generally nicer.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">15</span>) <span class="sc">+</span> </span>
<span id="cb39-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb39-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>, </span>
<span id="cb39-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb39-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()))</span></code></pre></div>
<p>Note, this is a global options that will affect all plots created after executing this command within an <code>R</code> session (i.e., to reset to the default theme you would have to restart your <code>R</code> session).</p>
<p>We then create a new data set that we will be using for the plots here. Before creating this plot we need to consider exactly what we want to plot. In the plots above we have aggregated the data on the level of the individual lotteries (i.e., unique combination of gains and losses). Whereas this made sense for this plot, it ignored the different participants, which are usually considered a major source of noise. What this means that it usually is a good idea to show the distribution of responses across participants to allow to get a visual impression of the level of noise in the data. Therefore, instead of aggregating across participants we will now first calculate one score per participant and then show the distribution across participants. We begin by creating this data for all lotteries. Whereas this might not be the most informative substantively (e.g., compared to only plotting the shared symmetric lotteries), it allows us to try out a few different plotting options.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>part_sum <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, subno) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp)) <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb40-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;condition&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb40-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-6" aria-hidden="true" tabindex="-1"></a>part_sum</span>
<span id="cb40-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 358 x 3</span></span>
<span id="cb40-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition subno mean_acc</span></span>
<span id="cb40-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;    &lt;dbl&gt;</span></span>
<span id="cb40-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -$20/+$40 5        0.562</span></span>
<span id="cb40-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 -$20/+$40 13       0.5  </span></span>
<span id="cb40-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -$20/+$40 53       0.344</span></span>
<span id="cb40-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 -$20/+$40 61       0.484</span></span>
<span id="cb40-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 -$20/+$40 73       0.266</span></span>
<span id="cb40-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 -$20/+$40 85       0.375</span></span>
<span id="cb40-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 352 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-41-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-42-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb43-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-43-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>only the symmetric lotteries that are shared across conditions separately for each participant and condition.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a>part_sum <span class="ot">&lt;-</span> tbl1a <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(loss <span class="sc">==</span> gain, loss <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, subno) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_acc =</span> <span class="fu">mean</span>(resp)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb44-6"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;condition&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb44-7"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-7" aria-hidden="true" tabindex="-1"></a>part_sum</span>
<span id="cb44-8"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 358 x 3</span></span>
<span id="cb44-9"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   condition subno mean_acc</span></span>
<span id="cb44-10"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;    &lt;dbl&gt;</span></span>
<span id="cb44-11"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 -$20/+$40 5        0    </span></span>
<span id="cb44-12"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 -$20/+$40 13       0    </span></span>
<span id="cb44-13"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -$20/+$40 53       0    </span></span>
<span id="cb44-14"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 -$20/+$40 61       0    </span></span>
<span id="cb44-15"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 -$20/+$40 73       0.667</span></span>
<span id="cb44-16"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 -$20/+$40 85       0.667</span></span>
<span id="cb44-17"><a href="short-introduction-to-r-and-the-tidyverse.html#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 352 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-45-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb46-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-46-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="short-introduction-to-r-and-the-tidyverse.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(part_sum, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> mean_acc)) <span class="sc">+</span></span>
<span id="cb47-2"><a href="short-introduction-to-r-and-the-tidyverse.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="tidyverse-intro_files/figure-html/unnamed-chunk-47-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="one-continuous-variables-histograms" class="section level3" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> One Continuous Variables: Histograms</h3>
</div>
</div>
<div id="cheat-sheets" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Cheat Sheets</h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-walasekHowMakeLoss2015" class="csl-entry">
Walasek, Lukasz, and Neil Stewart. 2015. <span>“How to Make Loss Aversion Disappear and Reverse: Tests of the Decision by Sampling Origin of Loss Aversion.”</span> <em>Journal of Experimental Psychology: General</em> 144 (1): 7–11. <a href="https://doi.org/10.1037/xge0000039">https://doi.org/10.1037/xge0000039</a>.
</div>
<div id="ref-tidyverse2019" class="csl-entry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the Tidyverse.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-wilkinsonGrammarGraphics1999" class="csl-entry">
Wilkinson, Leland I. 1999. <em>The Grammar of Graphics</em>. <span>New York</span>: <span>Springer</span>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="28">
<li id="fn28"><p>It can happen that when converting Excel files to <code>csv</code> files in Excel that Excel saves them using a non-standard encoding. This can be seen that the first column name is preceded by some additional characters (i.e., in the present case the first column would be <code>ï..subno</code> instead of <code>subno</code>. In this case, changing the file encoding in the <code>read.csv</code> command might help. For example: <code>df1a &lt;- read.csv("data/ws2015_exp1a.csv", fileEncoding = "UTF-8-BOM")</code>.<a href="short-introduction-to-r-and-the-tidyverse.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>There are other individuals that are instrumental to the existence of <code>R</code> that would also deserve a similar stardom. For example, without the tireless work maintaining CRAN by Brian Ripley, Kurt Hornik, and Uwe Ligges <code>R</code> would be in a very different shape. Likewise, Chris Chambers, the inventor of <code>S</code>, which is the predecessor of <code>R</code>, also deserves some significant credit.<a href="short-introduction-to-r-and-the-tidyverse.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>The pipe operator, <code>%&gt;%</code>, is part of the <code>magrittr</code> package which pre-dates the <code>tidyverse</code> and was not initially written by Hadley Wickham, but by Stefan Milton Bache. The name of the package is a pun on the famous painting <a href="https://en.wikipedia.org/wiki/The_Treachery_of_Images">“The Teachery of Images”</a> by Belgian surrealist painter René Magritte. However, because loading the <code>tidyverse</code> also loads the pipe (through the <code>dplyr</code> package), we do not need to load <code>magrittr</code> directly.<a href="short-introduction-to-r-and-the-tidyverse.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>The most important short cut in <code>RStudio</code> for me is <code>Alt</code> + <code>-</code> which adds the assignment operator <code>&lt;-</code> plus enclosing spaces. So using this saves 4 other key presses and is really much better.<a href="short-introduction-to-r-and-the-tidyverse.html#fnref31" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("webex-correct");
  } else {
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-2-quiz.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="standard1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["stats_for_experiments.pdf", "stats_for_experiments.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
