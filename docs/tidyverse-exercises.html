<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>tidyverse: Example, Quiz, and Exercises | Introduction to Statistics for Experimental Psychology with R</title>
<meta name="author" content="Henrik Singmann">
<meta name="description" content="To get into the habit of doing it regularly when starting a new task or analysis, now is probably a good time to restart your R session. As a reminder, do so through the RStudio menu with Session...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="tidyverse: Example, Quiz, and Exercises | Introduction to Statistics for Experimental Psychology with R">
<meta property="og:type" content="book">
<meta property="og:description" content="To get into the habit of doing it regularly when starting a new task or analysis, now is probably a good time to restart your R session. As a reminder, do so through the RStudio menu with Session...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="tidyverse: Example, Quiz, and Exercises | Introduction to Statistics for Experimental Psychology with R">
<meta name="twitter:description" content="To get into the habit of doing it regularly when starting a new task or analysis, now is probably a good time to restart your R session. As a reminder, do so through the RStudio menu with Session...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/style.css">
<link rel="stylesheet" href="include/webex.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Introduction to Statistics for Experimental Psychology with <code>R</code></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="role-of-statistics-in-the-research-process.html"><span class="header-section-number">1</span> Role of Statistics in the Research Process</a></li>
<li><a class="" href="chapter-1-quiz.html">Chapter 1: Quiz</a></li>
<li><a class="" href="research-designs.html"><span class="header-section-number">2</span> Data and Research Designs</a></li>
<li><a class="" href="chapter-2-quiz.html">Chapter 2: Quiz</a></li>
<li><a class="" href="tidyverse-intro.html"><span class="header-section-number">3</span> Short Introduction to R and the tidyverse</a></li>
<li><a class="active" href="tidyverse-exercises.html">tidyverse: Example, Quiz, and Exercises</a></li>
<li><a class="" href="ggplot2-intro.html"><span class="header-section-number">4</span> Data Visualisation with ggplot2</a></li>
<li><a class="" href="ggplot-exercises.html">ggplot2: Example, Quiz, and Exercises</a></li>
<li><a class="" href="standard1.html"><span class="header-section-number">5</span> The Standard Approach for One Independent Variable</a></li>
<li><a class="" href="case-study-laptop.html"><span class="header-section-number">6</span> Case Study: More Results from Note Taking Studies</a></li>
<li><a class="" href="standard-approach-exercises.html">Standard Approach for One IV: Quiz and Exercises</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/singmann/stats_for_experiments">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidyverse-exercises" class="section level1 unnumbered">
<h1>
<code>tidyverse</code>: Example, Quiz, and Exercises<a class="anchor" aria-label="anchor" href="#tidyverse-exercises"><i class="fas fa-link"></i></a>
</h1>
<p>To get into the habit of doing it regularly when starting a new task or analysis, now is probably a good time to restart your <code>R</code> session. As a reminder, do so through the <code>RStudio</code> menu with <code>Session</code> - <code>Restart R</code>. After this, we need to load the <code>tidyverse</code> again:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span></span></code></pre></div>
<div id="extended-walasek-example" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Extended <code>tidyverse</code> Example: Walasek &amp; Stewart (2015) Exp. 1a &amp; 1b<a class="anchor" aria-label="anchor" href="#extended-walasek-example"><i class="fas fa-link"></i></a>
</h2>
<div id="reading-both-data-sets" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Reading Both Data Sets<a class="anchor" aria-label="anchor" href="#reading-both-data-sets"><i class="fas fa-link"></i></a>
</h3>
<p>As an extended <code>tidyverse</code> example, let us look once again at the data of <span class="citation">Walasek and Stewart (<a href="references.html#ref-walasekHowMakeLoss2015">2015</a>)</span>. As described in Section <a href="tidyverse-intro.html#files">3.4.1</a>, there are two similar data sets, Experiments 1a and 1b, that we can consider together (and have done so in Section <a href="role-of-statistics-in-the-research-process.html#alternative-explanation-loss-aversion-or-loss-seeking">1.2.2</a>). To follow the extended examples, download them both into folder <code>data</code> that is in your current working directory: <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.csv">Experiment 1a</a> and <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1b.csv">Experiment 1b</a>. Then, we can load them both as separate objects using <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/ws2015_exp1a.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">22912</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): response</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): subno, loss, gain, condition, resp</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="va">ws1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/ws2015_exp1b.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">27072</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (1): response</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (5): subno, loss, gain, condition, resp</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>We use new names for the resulting data objects (<code>ws1a</code> and <code>ws1b</code>) to help us remember that this is the data from <span class="citation">Walasek and Stewart (<a href="references.html#ref-walasekHowMakeLoss2015">2015</a>)</span>, Experiments 1a and 1b. It's generally a good idea to use descriptive object names as this makes code easier to read later on. Especially when the code is long, one could even use more descriptive names such as <code>walasek_stewart_2015_1a</code> and <code>walasek_stewart_2015_1b</code>. However, as this example stays relatively short, the first letter of the last names and no year will suffice.</p>
<p>Note that as in the previous chapter, if you have problems downloading these two files or setting up the correct working directory, you can load them directly from the internet as well. However, this is not recommended and only shown here to make sure you can follow all steps in this example.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1a.csv"</span><span class="op">)</span></span>
<span><span class="va">ws1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://github.com/singmann/stats_for_experiments/raw/master/data/ws2015_exp1b.csv"</span><span class="op">)</span></span></code></pre></div>
<p>We now have two data sets that have the same structure (i.e., with the same columns and data types) as we can see by just printing them both:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 22,912 × 6</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">subno</span>  <span style="font-weight: bold;">loss</span>  <span style="font-weight: bold;">gain</span> <span style="font-weight: bold;">response</span> <span style="font-weight: bold;">condition</span>  <span style="font-weight: bold;">resp</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span>     8     6     6 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span>     8     6     8 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span>     8     6    10 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span>     8     6    12 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">5</span>     8     6    14 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">6</span>     8     6    16 accept        20.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 22,906 more rows</span></span></span>
<span><span class="va">ws1b</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 27,072 × 6</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">subno</span>  <span style="font-weight: bold;">loss</span>  <span style="font-weight: bold;">gain</span> <span style="font-weight: bold;">response</span> <span style="font-weight: bold;">condition</span>  <span style="font-weight: bold;">resp</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span>     1     6    12 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span>     1     6    16 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span>     1     6    20 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span>     1     6    24 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">5</span>     1     6    28 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">6</span>     1     6    32 accept        40.2     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 27,066 more rows</span></span></span></code></pre></div>
<p>What this output shows is that not only do the two data sets have the same columns in the same order, but they also appear to have the same condition names. To check, let's print the sorted unique values for each <code>condition</code> column:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span><span class="op">$</span><span class="va">condition</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 20.2 20.4 40.2 40.4</span></span>
<span><span class="va">ws1b</span><span class="op">$</span><span class="va">condition</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 20.2 20.4 40.2 40.4</span></span></code></pre></div>
<p>This confirms that indeed, the condition names are the same in both data sets.</p>
</div>
<div id="combining-both-data-sets" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Combining Both Data Sets<a class="anchor" aria-label="anchor" href="#combining-both-data-sets"><i class="fas fa-link"></i></a>
</h3>
<p>To analyse these two data sets together, as we have done in Section <a href="role-of-statistics-in-the-research-process.html#alternative-explanation-loss-aversion-or-loss-seeking">1.2.2</a>, we now have to combine these two <code>tibble</code>s into one. Specifically, we need to add the <em>rows</em> of one of the data sets to the other data sets (in contrast to adding additional <em>columns</em> to one of the data sets). The <code>tidyverse</code> function to combine multiple <code>tibble</code>s by rows is <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code>. So the code for combining the two data sets is simply <code>bind_rows(ws1a, ws1b)</code>. This will only work in a case like this in which not only do we have the same columns, but they are also in the same order .</p>
<p>However, before combining the data, we have to consider one further complication. We can see that in both data sets the participant identifier column, <code>subno</code>, appears to consist of whole numbers. This means that the same number may be used for different participants in the two experiments. If we do not account for this possibility before combining the data, we may end up with a data set in which data from different participants are treated as coming from the same participant -- a clear error. For example, the output above shows that there is a participant with <code>subno</code> 8 in Experiment 1a. If there is also a participant with <code>subno</code> 8 in Experiment 1b, the data from these two different participants (no participant participated in both studies) would be treated as being from the same participant -- a clear error. To see whether this is indeed a potential problem, we print all individual <code>subno</code> values for both experiments.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span><span class="op">$</span><span class="va">subno</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1]   5   8  13  24  35  36  38  40  42  48  52  53  59</span></span>
<span><span class="co">#&gt;  [14]  60  61  62  63  64  70  73  76  80  82  83  85  86</span></span>
<span><span class="co">#&gt;  [27]  87  88  89  90  92  93  94  95  96  97  99 100 103</span></span>
<span><span class="co">#&gt;  [40] 104 106 107 109 110 112 113 114 115 118 119 120 122</span></span>
<span><span class="co">#&gt;  [53] 123 124 125 128 129 130 131 132 133 134 135 136 137</span></span>
<span><span class="co">#&gt;  [66] 139 141 142 143 144 145 147 148 149 150 152 154 155</span></span>
<span><span class="co">#&gt;  [79] 156 157 158 159 160 161 162 163 164 165 166 167 168</span></span>
<span><span class="co">#&gt;  [92] 169 170 171 172 173 174 175 176 177 178 180 181 183</span></span>
<span><span class="co">#&gt; [105] 184 186 187 188 190 191 193 194 195 196 198 200 201</span></span>
<span><span class="co">#&gt; [118] 202 204 206 207 208 209 210 211 212 213 214 215 216</span></span>
<span><span class="co">#&gt; [131] 217 218 219 220 221 222 223 224 225 226 227 228 229</span></span>
<span><span class="co">#&gt; [144] 230 231 232 233 234 235 236 237 238 240 242 243 244</span></span>
<span><span class="co">#&gt; [157] 245 246 247 248 249 250 251 256 257 258 259 260 261</span></span>
<span><span class="co">#&gt; [170] 262 263 264 265 266 267 268 269 270 271 272 273 274</span></span>
<span><span class="co">#&gt; [183] 276 277 278 279 280 281 282 283 284 285 286 287 288</span></span>
<span><span class="co">#&gt; [196] 289 290 291 292 293 294 295 296 297 298 299 300 301</span></span>
<span><span class="co">#&gt; [209] 303 304 306 307 308 309 310 311 312 314 315 316 317</span></span>
<span><span class="co">#&gt; [222] 319 320 322 323 325 326 327 328 330 331 332 333 334</span></span>
<span><span class="co">#&gt; [235] 335 336 337 338 339 340 341 342 343 344 345 346 347</span></span>
<span><span class="co">#&gt; [248] 348 349 350 351 352 353 354 355 356 357 358 359 360</span></span>
<span><span class="co">#&gt; [261] 361 362 363 364 365 366 367 368 369 370 371 372 373</span></span>
<span><span class="co">#&gt; [274] 374 375 377 378 379 380 381 382 383 384 385 386 387</span></span>
<span><span class="co">#&gt; [287] 388 389 390 391 392 393 394 395 396 397 398 399 400</span></span>
<span><span class="co">#&gt; [300] 401 402 403 404 405 406 407 408 409 410 411 412 413</span></span>
<span><span class="co">#&gt; [313] 414 415 416 417 418 420 421 422 423 424 425 426 427</span></span>
<span><span class="co">#&gt; [326] 429 430 431 432 434 435 437 438 440 441 442 443 444</span></span>
<span><span class="co">#&gt; [339] 445 446 447 448 449 450 451 452 453 454 455 456 457</span></span>
<span><span class="co">#&gt; [352] 458 459 460 461 462 463 464</span></span>
<span><span class="va">ws1b</span><span class="op">$</span><span class="va">subno</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1]   1   2   3   4   5   7   8   9  10  11  12  13  14</span></span>
<span><span class="co">#&gt;  [14]  15  16  18  19  20  21  22  25  26  27  28  29  30</span></span>
<span><span class="co">#&gt;  [27]  31  32  33  34  35  36  37  38  39  40  41  42  43</span></span>
<span><span class="co">#&gt;  [40]  44  45  46  47  48  49  50  51  52  53  54  55  56</span></span>
<span><span class="co">#&gt;  [53]  57  58  59  60  61  62  63  64  65  66  67  68  69</span></span>
<span><span class="co">#&gt;  [66]  71  73  74  77  78  79  80  81  82  83  84  85  86</span></span>
<span><span class="co">#&gt;  [79]  87  88  89  90  91  92  93  94  95  96  98 101 102</span></span>
<span><span class="co">#&gt;  [92] 103 104 105 106 107 108 109 110 111 112 113 114 115</span></span>
<span><span class="co">#&gt; [105] 116 117 118 119 120 121 122 123 124 125 126 127 128</span></span>
<span><span class="co">#&gt; [118] 129 131 132 133 134 135 136 137 138 139 140 141 142</span></span>
<span><span class="co">#&gt; [131] 143 144 145 146 147 148 149 150 151 152 153 154 155</span></span>
<span><span class="co">#&gt; [144] 156 157 158 159 160 161 162 163 164 165 166 167 168</span></span>
<span><span class="co">#&gt; [157] 169 170 171 172 173 174 175 176 177 178 179 180 181</span></span>
<span><span class="co">#&gt; [170] 182 183 184 185 186 187 188 189 190 191 193 199 200</span></span>
<span><span class="co">#&gt; [183] 202 203 208 209 210 211 212 213 214 215 216 217 218</span></span>
<span><span class="co">#&gt; [196] 219 220 221 222 223 224 225 226 227 228 229 230 231</span></span>
<span><span class="co">#&gt; [209] 232 233 236 237 238 240 243 244 245 246 247 248 249</span></span>
<span><span class="co">#&gt; [222] 250 251 252 253 254 255 256 257 258 259 260 261 262</span></span>
<span><span class="co">#&gt; [235] 263 264 265 266 267 268 269 270 271 273 274 275 276</span></span>
<span><span class="co">#&gt; [248] 277 279 280 281 282 283 284 285 286 287 288 289 290</span></span>
<span><span class="co">#&gt; [261] 291 292 293 294 295 296 297 299 301 302 303 304 306</span></span>
<span><span class="co">#&gt; [274] 307 309 311 317 318 322 323 325 326 328 329 330 331</span></span>
<span><span class="co">#&gt; [287] 332 333 334 336 337 338 340 341 342 343 344 345 346</span></span>
<span><span class="co">#&gt; [300] 347 348 350 351 353 354 355 356 357 358 359 360 361</span></span>
<span><span class="co">#&gt; [313] 364 368 369 370 371 372 373 374 375 376 377 378 379</span></span>
<span><span class="co">#&gt; [326] 380 381 382 383 384 385 386 387 388 389 390 391 392</span></span>
<span><span class="co">#&gt; [339] 393 394 396 398 400 401 402 403 404 405 406 407 408</span></span>
<span><span class="co">#&gt; [352] 409 410 411 412 415 416 417 418 419 420 421 422 423</span></span>
<span><span class="co">#&gt; [365] 426 427 428 429 430 431 432 434 436 437 438 439 440</span></span>
<span><span class="co">#&gt; [378] 441 442 443 444 445 446 447 448 449 450 451 452 453</span></span>
<span><span class="co">#&gt; [391] 454 455 456 458 459 460 461 462 463 464 465 466 467</span></span>
<span><span class="co">#&gt; [404] 469 471 472 473 474 475 476 478 480 481 484 485 486</span></span>
<span><span class="co">#&gt; [417] 488 489 490 491 492 493 494</span></span></code></pre></div>
<p>The output confirms our suspicion. <code>subno</code> values are not unique across experiments, so we need to make them so before combining the data. One straightforward way to do this is by adding a string to the start of each <code>subno</code>, either <code>e1a_</code> or <code>e1b_</code>, that indicates which data set each participant belongs to. For this we use the <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> function which pastes strings together into one (<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> does so without adding any extra separation character to the combined strings).</p>
<p>In the same call, we will also convert the <code>subno</code> variable to a factor (as it is a categorical variable). We can then combine both data sets into one called <code>ws1</code> using the <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> call discussed above. We then get an overview of the combined data using the <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> function which is the <code>tidyverse</code> equivalent of <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> (<code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> often produces less verbose output for tibbles than <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>-- try it out yourself to see).</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1a</span> <span class="op">&lt;-</span> <span class="va">ws1a</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>subno <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"e1a_"</span>, <span class="va">subno</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ws1b</span> <span class="op">&lt;-</span> <span class="va">ws1b</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>subno <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"e1b_"</span>, <span class="va">subno</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ws1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">ws1a</span>, <span class="va">ws1b</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">ws1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 49,984</span></span>
<span><span class="co">#&gt; Columns: 6</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">subno    </span> <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span> e1a_8, e1a_8, e1a_8, e1a_8, e1a_8, e1a_8…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">loss     </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 6, 6, 6, 6, 6, 6, 6, 6, 8, 8, 8, 8, 8, 8…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">gain     </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 6, 8, 10, 12, 14, 16, 18, 20, 6, 8, 10, …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">response </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "accept", "accept", "accept", "accept", …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">condition</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 20.2, 20.2, 20.2, 20.2, 20.2, 20.2, 20.2…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">resp     </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1…</span></span></code></pre></div>
<p>The output shows that the <code>subno</code> for the first participant in Experiment 1 is now <code>e1a_8</code>, not <code>8</code>. In other words, <code>subno</code>'s are now unique within each experiment and so we can combine the data without making the larger data set misleading.</p>
<p>To verify this logic, we can count the number of unique values of <code>subno</code> for each data set using the <code><a href="https://rdrr.io/r/base/length.html">length()</a></code> function on the <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> elements of the <code>subno</code> vectors. <code><a href="https://rdrr.io/r/base/length.html">length()</a></code> is a function that returns the number of elements in a vector, so can be directly used in calculations. The calculation here shows that, indeed, the combined data has the same number of participants, 781, as Experiments 1a and 1b together.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">ws1a</span><span class="op">$</span><span class="va">subno</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">ws1b</span><span class="op">$</span><span class="va">subno</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 781</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">ws1</span><span class="op">$</span><span class="va">subno</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 781</span></span></code></pre></div>
<p>Before continuing with the analysis of the combined data, it makes sense to take a step back and consider briefly why we discussed the question of how to combine these two data sets rather extensively. One the one hand, the code above uses a few new functions that we have not yet introduced such as <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> and <code><a href="https://rdrr.io/r/base/length.html">length()</a></code>. As before, we want to introduce new functions by explicitly discussing their functionality.</p>
<p>On the other hand, the discussion above shows us one way of handling and checking the assumptions in our code. The issue here is that when combining two data sets using <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code>, the code assumes that the participant identifiers are unique. This is not necessarily an obvious assumption we have when writing the code, but it is a consequence of the fact that we simply concatenate both data sets. Because this is not an assumption that is obvious, we may overlook it, possibly leading to problems later on in our code. Specifically, treating data from different participants as coming from the same participant, just because they coincidentally share the same <code>subno</code>, is probably <em>not</em> appropriate in our statistical analysis. By checking whether the number of participants in the combined data set is equal to the sum of the number of participants in the separate data sets, we ensure that combining the two data sets was done appropriately.</p>
<p>Another reason why we are discussing this issue in detail is that in a paper on which I am a co-author, <span class="citation">Skovgaard-Olsen, Singmann, and Klauer (<a href="references.html#ref-skovgaard-olsenRelevanceEffectConditionals2016">2016</a>)</span>, I overlooked this exact problem. The experiment reported in the paper consisted of three conditions that needed to be combined for the analysis. The problem was that the participant identifiers were only unique within conditions and not across conditions and I combined the data sets without considering this fact. Consequently, the statistical analysis incorrectly treated observations from different participants as belonging to the same participant. In fact, all statistical results reported in <span class="citation">Skovgaard-Olsen, Singmann, and Klauer (<a href="references.html#ref-skovgaard-olsenRelevanceEffectConditionals2016">2016</a>)</span> are affected as I only recognised the error after publication of the article. Luckily for my co-authors and me, once I realised what had happened and re-analysed the data after correctly combining it, that initial error had had no substantive effects on the results. Some details changed (the exact value of some numbers), but not the qualitative pattern of results. Consequently, we could fix this error by publishing a straightforward correction <span class="citation">(<a href="references.html#ref-skovgaard-olsenCorrigendumRelevanceEffect2018">Skovgaard-Olsen, Singmann, and Klauer 2018</a>)</span>. The larger point here is that such errors can and will happen. The best way to avoid them is by regularly checking explicitly whether the assumptions we make about our data and our code hold.</p>
</div>
<div id="preparing-the-data-set-and-descriptive-analysis" class="section level3" number="3.7.3">
<h3>
<span class="header-section-number">3.7.3</span> Preparing the Data Set and Descriptive Analysis<a class="anchor" aria-label="anchor" href="#preparing-the-data-set-and-descriptive-analysis"><i class="fas fa-link"></i></a>
</h3>
<p>Now that we have combined the two data sets into one <code>tibble</code>, we can further prepare it for analysis. For this, we turn all categorical variables into factors, as shown before.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1</span> <span class="op">&lt;-</span> <span class="va">ws1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    subno <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">subno</span><span class="op">)</span>,</span>
<span>    response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">response</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"reject"</span>, <span class="st">"accept"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>      <span class="va">condition</span>, </span>
<span>      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40.2</span>, <span class="fl">20.2</span>, <span class="fl">40.4</span>, <span class="fl">20.4</span><span class="op">)</span>, </span>
<span>      labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"-$20/+$40"</span>, <span class="st">"-$20/+$20"</span>, <span class="st">"-$40/+$40"</span>, <span class="st">"-$40/+$20"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">ws1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 49,984 × 6</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">subno</span>  <span style="font-weight: bold;">loss</span>  <span style="font-weight: bold;">gain</span> <span style="font-weight: bold;">response</span> <span style="font-weight: bold;">condition</span>  <span style="font-weight: bold;">resp</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> e1a_8     6     6 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> e1a_8     6     8 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> e1a_8     6    10 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> e1a_8     6    12 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">5</span> e1a_8     6    14 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">6</span> e1a_8     6    16 accept   -$20/+$20     1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 49,978 more rows</span></span></span></code></pre></div>
<p>Next, we calculate the number of participants per condition and check if every participant has 64 trials. This is one way to check our assumptions about the data and ensure data integrity (we use the same code as described in Section <a href="tidyverse-intro.html#counting">3.5.3.5</a>).</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">condition</span>, <span class="va">subno</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    n_participants <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    all_64 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">n</span> <span class="op">==</span> <span class="fl">64</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'condition'. You can</span></span>
<span><span class="co">#&gt; override using the `.groups` argument.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">condition</span> <span style="font-weight: bold;">n_participants</span> <span style="font-weight: bold;">all_64</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;lgl&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> -$20/+$40            191 TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> -$20/+$20            202 TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> -$40/+$40            190 TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> -$40/+$20            198 TRUE</span></span></code></pre></div>
<p>Finally, it is time to perform a descriptive analysis of the data. The main result we have reported for this data was the mean acceptance rates for the symmetric lotteries that appear in all conditions. The code for this is the same as given in Section <a href="tidyverse-intro.html#group-by">3.5.3.4</a>, but now we use the combined data. This code reproduces the results reported in Section <a href="role-of-statistics-in-the-research-process.html#alternative-explanation-loss-aversion-or-loss-seeking">1.2.2</a>.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">loss</span> <span class="op">==</span> <span class="va">gain</span>, <span class="va">loss</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">16</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_acc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">condition</span> <span style="font-weight: bold;">mean_acc</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> -$20/+$40    0.213</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> -$20/+$20    0.5  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> -$40/+$40    0.454</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> -$40/+$20    0.710</span></span></code></pre></div>
</div>
</div>
<div id="quiz" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Quiz<a class="anchor" aria-label="anchor" href="#quiz"><i class="fas fa-link"></i></a>
</h2>
<p>Note: The pull-down menu for selecting an answer turns green after selecting the correct answer.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-19" class="exercise"><strong>Exercise 3.1  </strong></span>What does <code>NA</code> stand for in <code>R</code>?</p>
<ol style="list-style-type: decimal">
<li>"not available", i.e., missing data</li>
<li>"no answer", i.e, <code>R</code> couldn't find an answer to your command</li>
<li>"nothing applicable", i.e., there are no values/variables that match your request</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="answer">1</option>
<option value="">2</option>
<option value="">3</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-20" class="exercise"><strong>Exercise 3.2  </strong></span>Which of the following is NOT true for an <code>R</code> package?</p>
<ol style="list-style-type: decimal">
<li>Is a collection of functions that extend <code>R</code>.</li>
<li>Needs to be installed from CRAN every time you use it .</li>
<li>Needs to be loaded every time you use it.</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="answer">2</option>
<option value="">3</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-21" class="exercise"><strong>Exercise 3.3  </strong></span>What are "bugs" in programming languages?</p>
<ol style="list-style-type: decimal">
<li>variables that are not of interest for a specific analysis</li>
<li>the same code is used multiple times for different datasets</li>
<li>error in the code that leads to unexpected/wrong results</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">2</option>
<option value="answer">3</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-22" class="exercise"><strong>Exercise 3.4  </strong></span>What is a <code>tibble</code>?</p>
<ol style="list-style-type: decimal">
<li>a variant of a <code>data.frame</code>
</li>
<li>the <code>tiydverse</code> version of a vector</li>
<li>the result you get from data wrangling</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="answer">1</option>
<option value="">2</option>
<option value="">3</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-23" class="exercise"><strong>Exercise 3.5  </strong></span>This operator <code>%&gt;%</code> means we are using...</p>
<ol style="list-style-type: decimal">
<li>base R</li>
<li>a pipe</li>
<li>a data.frame</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="answer">2</option>
<option value="">3</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-24" class="exercise"><strong>Exercise 3.6  </strong></span>The <code>dplyr</code> package is NOT useful for:</p>
<ol style="list-style-type: decimal">
<li>picking variables based on their names</li>
<li>adding new variables</li>
<li>summarizing multiple values</li>
<li>changing the ordering of the rows</li>
<li>reading file in as csv</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">2</option>
<option value="">3</option>
<option value="">4</option>
<option value="answer">5</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-25" class="exercise"><strong>Exercise 3.7  </strong></span>Using the <code>dplyr</code> package, which function is used for adding/changing variables in the current data?</p>
<ol style="list-style-type: decimal">
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code></li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="answer">1</option>
<option value="">2</option>
<option value="">3</option>
<option value="">4</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-26" class="exercise"><strong>Exercise 3.8  </strong></span>Using the <code>dplyr</code> package, which function is used for selecting subsets of rows?</p>
<ol style="list-style-type: decimal">
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code></li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">2</option>
<option value="answer">3</option>
<option value="">4</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-27" class="exercise"><strong>Exercise 3.9  </strong></span>Using the <code>dplyr</code> package, which function is used for selecting subsets of columns?</p>
<ol style="list-style-type: decimal">
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></li>
<li>`<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>
</li>
<li><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code></li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">2</option>
<option value="">3</option>
<option value="answer">4</option></select></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-28" class="exercise"><strong>Exercise 3.10  </strong></span>When using the pipe operator <code>%&gt;%</code>, <code>R</code> executes operations in which order?</p>
<ol style="list-style-type: decimal">
<li>From innermost to outermost function</li>
<li>That depends on which other packages are loaded.</li>
<li>From left to right.</li>
</ol>
<p>Answer: <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">2</option>
<option value="answer">3</option></select></p>
</div>
</div>
<div id="practical-helpers-cheatsheets" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Practical Helpers: Cheatsheets<a class="anchor" aria-label="anchor" href="#practical-helpers-cheatsheets"><i class="fas fa-link"></i></a>
</h2>
<p>Trying to remember and applying all the <code>tidyverse</code> tools yourself can be a bit overwhelming at the beginning. There are quite a few functions and one has to remember for each what it does and what its syntax is. Furthermore, so far we have introduced the most important functions, but there are more in <code>dplyr</code> and other <code>tidyverse</code> packages that we do not have the space to introduce (for more see <a href="https://r4ds.had.co.nz/">"<code>R</code> for data science"</a>).</p>
<p>One way for you to keep an overview of which functions do what is with the help of <strong>cheat sheets</strong> (<em>or</em> cheatsheets). Cheat sheets are short (usually 1 or 2 pages) documents that provide an overview of a package or tool and are a common resource for many programming languages. Their benefit compared to other learning resources such as books or the documentation is that they provide a concise overview and can point you quickly to the right tool.</p>
<p>In the case of <code>R</code>, once you know which function to use (e.g., thanks to the cheat sheet) it might then make sense to follow up by looking at the documentation. The documentation can be obtained for each function by entering <code>?functionname</code> (e.g., <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">?summarise</a></code>) at the <code>R</code> prompt. This provides not only an explanation of what the function does plus all of its arguments, but will also usually have helpful examples.</p>
<p>For the <code>tiydverse</code> packages, <code>RStudio</code> provides an almost complete list of <a href="https://www.rstudio.com/resources/cheatsheets/">cheat sheets</a>. The most relevant for us at the moment is the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf"><code>dplyr</code> cheat sheet</a>. Furthermore, there are also cheat sheets for <a href="https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf">the <code>RStudio</code> IDE iteself</a>, <a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">reading in data</a>, and even <a href="http://github.com/rstudio/cheatsheets/raw/master/base-r.pdf">base <code>R</code></a>. Before diving into the examples below, it might make sense to download (or even print) the cheat sheets and have them by your side while trying to solve the problems.</p>
</div>
<div id="earworms-task1" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> <code>tiydverse</code> Exercise: Earworms and Sleep<a class="anchor" aria-label="anchor" href="#earworms-task1"><i class="fas fa-link"></i></a>
</h2>
<p>For this exercise we will work with a data set from <span class="citation">Scullin, Gao, and Fillmore (<a href="references.html#ref-scullinBedtimeMusicInvoluntary2021">2021</a>)</span> investigating a research question about the relationship between listening to music and sleep: "Many people listen to music for hours every day, often near bedtime. We investigated whether music listening affects sleep, focusing on a rarely explored mechanism: involuntary musical imagery (earworms)." I'm sure most of you will have had the experience of an earworm -- hearing some particular piece of music in your head, and not being able to 'stop it playing'. If this seems alien to you, <a href="https://en.wikipedia.org/wiki/Earworm">Wikipedia provides a longer introduction</a>.</p>
<p>Here, we are looking at the data from <span class="citation">Scullin, Gao, and Fillmore (<a href="references.html#ref-scullinBedtimeMusicInvoluntary2021">2021</a>)</span>'s Study 2, which was a sleep-lab experiment. Participants came to the sleep-lab and stayed for one night in a controlled environment in which a number of objective sleep parameters could be measured via <a href="https://en.wikipedia.org/wiki/Polysomnography">polysomnography</a>. Throughout the night several physiological parameters such as electroencephalography (EEG) and breathing were recorded continuously. Participants were assigned to one of two conditions determining the music they heard just before going to bed: either a condition in which original versions of three pop songs, which included the lyrics, or an instrumental version of the same three pop-songs (without the lyrics). The three songs (<a href="https://youtu.be/1k8craCGpgs">"Don't Stop Believin'" by Journey</a>, <a href="https://youtu.be/fWNaR-rxAic">"Call Me Maybe" by Carly Rae Jepsen</a>, and <a href="https://youtu.be/nfWlot6h_JM">"Shake It Off" by Taylor Swift</a>) were chosen because previous research had shown that they induce earworms. After participants woke up in the morning, they were asked whether they experienced any earworms at different points in the night or in the morning.</p>
<p>The researchers were interested in two research questions:</p>
<ol style="list-style-type: decimal">
<li><p>Does listening to the original version of a pop song (with lyrics) or an instrumental version of it affect whether or not participants develop earworms? This research question was based on previous results and the authors expected the instrumental version to induce more earworms than the lyrical versions.</p></li>
<li><p>Does the sleep quality differ between participants in the lyrical music condition and the instrumental music condition (in which participants are expected to have more earworms)?</p></li>
</ol>
<p>Before looking at the data, take a guess yourself. Do you believe you sleep better after listening to music that makes it likely that you develop an earworm?</p>
<p>A version of the original data file made available by <span class="citation">Scullin, Gao, and Fillmore (<a href="references.html#ref-scullinBedtimeMusicInvoluntary2021">2021</a>)</span> can be downloaded from <a href="https://github.com/singmann/stats_for_experiments/raw/master/data/earworm_study.csv">here</a>. I recommend you download it to the <code>data</code> folder in the working directory and then you can read in the data via the following code. It makes sense to restart <code>R</code> before doing that, so we also reload the <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="va">earworm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/earworm_study.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">48</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">19</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (7): group, gender, raceethnicity, nativeenglishspe...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (12): id, relaxed, sleepy, earworm_falling_asleep, e...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>Alternatively, you can also download directly from the internet for this exercise, but I really recommend getting comfortable with files, folders, and the <code>R</code> working directory. The code for downloading from the internet is:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://github.com/singmann/stats_for_experiments/raw/master/data/earworm_study.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Let's take a first look at the data:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">earworm</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 48</span></span>
<span><span class="co">#&gt; Columns: 19</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">id                    </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 102, 103, 104, 105, 106, 10…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">group                 </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "Lyrics", "Lyrics", "Instru…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">relaxed               </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 37, 96, 62, 83, 68, 78, 60,…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">sleepy                </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 49, 10, 44, 97, 42, 52, 41,…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">earworm_falling_asleep</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">earworm_night         </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">earworm_morning       </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 1, 0, 0, …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">earworm_control       </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 0, 0, 0, 0, 1, 0, 0, …</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">sleep_efficiency      </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 90.0, 95.7, 89.8, 94.1, 98.…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">sleep_time            </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 487.6, 519.4, 472.1, 494.8,…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">age                   </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 19, 21, 19, 20, 27, 18, 22,…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">gender                </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "Female", "Female", "Female…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">raceethnicity         </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "Caucasian", "Caucasian", "…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">nativeenglishspeaker  </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "Yes", "Yes", "Yes", "Yes",…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">bilingual             </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "No", "No", "No", "No", "No…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">height_inches         </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 66, 68, 64, 69, 53, 62, 76,…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">weight_lbs            </span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> 145, 183, 135, 155, 89, 120…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">handedness            </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "R", "L", "R", "R", "R", "R…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">classrank             </span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "Sophomore", "Junior", "Fre…</span></span></code></pre></div>
<p>In addition to the variables relevant to our research questions, the data contains a number of control variables (the original data file included even more). We can see a total of 19 variables:</p>
<ul>
<li>
<code>id</code>: Participant identifier</li>
<li>
<code>group</code>: experimental condition with two values: "Lyrics" versus "Instrumental"</li>
<li>
<code>relaxed</code>: question asking participants how relaxed they felt on a scale from 0 (= not relaxed) to 100 (= very relaxed) after listening to the music.</li>
<li>
<code>sleepy</code>: question asking participants how sleepy they felt on a scale from 0 (= not sleepy) to 100 (= very sleepy) after listening to the music.
The next 5 variables concerned whether or not the participants reported having an earworm at different times:</li>
<li>
<code>earworm_falling_asleep</code>: Had earworm when trying to fall asleep last night? 0 = No; 1 = Yes</li>
<li>
<code>earworm_night</code>: Had earworm when woke up during the night? 0 = No; 1 = Yes</li>
<li>
<code>earworm_falling_asleep</code>: Had earworm when woke up during the night? 0 = No; 1 = Yes</li>
<li>
<code>earworm_morning</code>: Had earworm when woke up this morning? 0 = No; 1 = Yes</li>
<li>
<code>earworm_control</code>: Had earworm at the control time point (i.e., after getting ready to leave the lab)? 0 = No; 1 = Yes</li>
<li>
<code>sleep_efficiency</code>: sleep efficiency percentage score obtained from the polysomnography (0 = very low sleep efficiency and 100 = very high sleep efficiency)</li>
<li>
<code>sleep_time</code>: total sleep time in minutes</li>
</ul>
<p>The remaining variables are demographic ones whose meaning should be evident, except, perhaps, for <code>classrank</code>. This uses US nomenclature for what year of 4 the student participant is in (i.e., freshman = year 1, sophomore = year 2, junior = year 3, and senior = year 4) plus some additional values.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-29" class="exercise"><strong>Exercise 3.11  </strong></span>For research questions 1 and 2 described above, which variables are the independent and which are the dependent variables?</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>The answer to this question does not require coding. Instead you should come to a solution by just thinking about the description of the experiment and the variables.</p>
<p>Also, remember that in an experiment we test the effect of the independent variable on the dependent variable.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>The independent variable for both research questions is the experimental condition, variable <code>group</code>.</p>
<p>For research question 1, we have three dependent variables, all beginning with <code>earworm_</code>: <code>earworm_falling_asleep</code>, <code>earworm_night</code>, and <code>earworm_morning</code>. Only <code>earworm_control</code> is not a dependent variable for this research question, but a control variable (i.e., we should not see an effect of <code>group</code> on this dependent variable). [Note that the categorisation of <code>earworm_control</code> as a control variable was a decision of the original authors. I would think that in principle there could still be an effect of the manipulation on this variable as it was collected after the experimental manipulation. However, as they declared it like that, we go with their categorisation here.]</p>
<p>For research question 2, we have one main dependent variable, <code>sleep_efficiency</code> as a measure of sleep quality. We could also consider the time a participant sleeps, <code>sleep_time</code>, as a secondary measure of sleep quality.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-30" class="exercise"><strong>Exercise 3.12  </strong></span>How can you categorise the other variables, such as <code>relaxed</code>, <code>age</code>, etc., that are neither independent nor dependent variables? What results pattern would we expect for these variables?</p>
<div class="webex-solution">
<button>
Solution
</button>
<p>The other variables can all be understood as control variables. The two explicitly psychological measures, <code>relaxed</code> and <code>sleepy</code>, are taken right after the experimental manipulation (i.e., listening to either lyrical or instrumental music). We hope that the type of music does not affect this measure. The other control variables, <code>age</code> and following, are all demographic variables. We can use them to check whether the randomisation led to unbalanced conditions. And as we have discussed before, the participant identifier, <code>id</code>, is also a control variable.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-31" class="exercise"><strong>Exercise 3.13  </strong></span>Before starting with the analysis, we should prepare the data and transform all important categorical variables into <code>factor</code>s to avoid any problems. Your task: Transform <code>id</code> and <code>group</code> into a <code>factor</code>. For <code>group</code> make sure that the original version with lyrics is factor level 1.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>Sounds like a job for <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,</span>
<span>    group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">group</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Lyrics"</span>, <span class="st">"Instrumental"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-32" class="exercise"><strong>Exercise 3.14  </strong></span>As a first step in our analysis, we need to get an overview of the data. For this, we first need to learn something about the structure of the data. This requires two steps:</p>
<ul>
<li>How many rows does the data from each participant occupy?</li>
<li>How many participants are in each condition?</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<p>Sounds like a job for <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 48 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">id</span>        <span style="font-weight: bold;">n</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> 102       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> 103       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> 104       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> 105       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">5</span> 106       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">6</span> 107       1</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 42 more rows</span></span></span></code></pre></div>
<p>Looks like every <code>id</code> has one row. However, let us make sure this is indeed the case.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>all_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">n</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">all_1</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;lgl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> TRUE</span></span></code></pre></div>
<p>Yes, everyone has only one row. As discussed before, if there is only one observation per participant there is no distinction between wide and long format, so we can use the data in this format.</p>
<p>Because there is only one observation per participant, we can directly count the number of participants per condition by counting the number of rows per condition.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>            <span style="font-weight: bold;">n</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics          25</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Instrumental    23</span></span></code></pre></div>
<p>There are 25 participants in the lyrics condition and 23 in the instrumental condition.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-33" class="exercise"><strong>Exercise 3.15  </strong></span>Before looking at the results, it's a good idea to get an overview of the demographics of the data. In the first step, let us provide a basic overview of participants ignoring the condition they are put in:</p>
<ul>
<li>Provide some summaries of the age of participants (min, max, mean, sd).</li>
<li>What is the gender distribution?</li>
<li>What is the ethnicity distribution of participants?</li>
</ul>
<p>When calculating the distribution of a categorical variable, not only calculate the frequencies, but also the proportions (i.e., relative frequencies).</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>For getting a summary on <code>age</code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> seems like a good idea.</p>
<p>For the other questions, we could also use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> conditional on the categorical variables or alternatively <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>. We can then calculate the proportions from the frequencies using the formula proportion = frequency / total sum.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>For the age distribution we have to look at the <code>age</code> variable:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;    <span style="font-weight: bold;">mean</span>   <span style="font-weight: bold;">min</span>   <span style="font-weight: bold;">max</span>    <span style="font-weight: bold;">sd</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span>  21.0    18    28  2.20</span></span></code></pre></div>
<p>Looks like the participants were all in the student age range.</p>
<p>To get the absolute frequencies for a categorical variable we can just do:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">gender</span>     <span style="font-weight: bold;">n</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Female    34</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Male      14</span></span></code></pre></div>
<p>We can then add the proportions to the resulting <code>tibble</code> using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">gender</span>     <span style="font-weight: bold;">n</span>  <span style="font-weight: bold;">prop</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Female    34 0.708</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Male      14 0.292</span></span></code></pre></div>
<p>Around 71% of participants were women and the rest were men.</p>
<p>For the ethnicity item we can use the same logic/code:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">raceethnicity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">raceethnicity</span>        <span style="font-weight: bold;">n</span>   <span style="font-weight: bold;">prop</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> African American     4 0.083<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Asian                6 0.125 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> Caucasian           29 0.604 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> Hispanic             9 0.188</span></span></code></pre></div>
<p>Around 60% are Caucasian, 19% Hispanic, and the rest Asian (12%) or African American (8%).</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-34" class="exercise"><strong>Exercise 3.16  </strong></span>Let us now calculate the conditional demographic distributions; that is, the demographic distribution conditional on the experimental condition <code>group</code>. The reason for doing so is to check if the randomisation created balanced or unbalanced groups on the control variables we have collected.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>We can re-use the code from the previous exercise, but need to add <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> to it.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>For the age distribution we can essentially copy the code from above and just need to add <code>group_by(group)</code>:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,</span>
<span>            sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>         <span style="font-weight: bold;">mean</span>   <span style="font-weight: bold;">min</span>   <span style="font-weight: bold;">max</span>    <span style="font-weight: bold;">sd</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics        20.4    18    24  1.63</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Instrumental  21.6    18    28  2.59</span></span></code></pre></div>
<p>Participants in the instrumental condition are on average around 1 year older than participants in the lyrics condition, which seems not too small given that the SD is not much larger. However, this difference could be mostly due to a larger maximum value, which would also explain the difference in SDs. To check this, we can split the data into two <code>tibble</code>s, one for each condition, and take a look at the sorted ages.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm_lyrics</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"Lyrics"</span><span class="op">)</span></span>
<span><span class="va">earworm_instrumental</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"Instrumental"</span><span class="op">)</span></span>
<span><span class="va">earworm_lyrics</span><span class="op">$</span><span class="va">age</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 18 18 18 19 19 19 19 19 20 20 20 20 20 20 21 21 21 21</span></span>
<span><span class="co">#&gt; [19] 21 22 22 22 23 23 24</span></span>
<span><span class="va">earworm_instrumental</span><span class="op">$</span><span class="va">age</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 18 19 19 19 20 20 20 20 21 21 21 21 21 21 21 22 22 22</span></span>
<span><span class="co">#&gt; [19] 22 25 26 27 28</span></span></code></pre></div>
<p>This suggests that it is not only one particularly old participant in the instrumental condition, but several (i.e., the four oldest participants are all in the instrumental condition). So there might be some age imbalance between the two conditions.</p>
<p>To calculate the conditional gender distributions, we first calculate the number of participants by <code>group</code> and <code>gender</code> combination. Then, we need to group again by the experimental condition <code>group</code> to calculate the relative frequencies within each condition. That is, we can also use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> conditional on the grouping factor created by <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> (i.e., the <code>sum(n)</code> part of the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> call is executed separately for each experimental condition after the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> part).</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'group'. You can</span></span>
<span><span class="co">#&gt; override using the `.groups` argument.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># Groups:   group [2]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>        <span style="font-weight: bold;">gender</span>     <span style="font-weight: bold;">n</span>  <span style="font-weight: bold;">prop</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics       Female    21 0.84 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Lyrics       Male       4 0.16 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> Instrumental Female    13 0.565</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> Instrumental Male      10 0.435</span></span></code></pre></div>
<p>The output shows that the gender ratio is not balanced between groups. Whereas we see a roughly 50-50 gender ratio in the instrumental condition, in the lyrical condition it is closer to 80-20.</p>
<p>Finally, let's use the same logic for the ethnicity question. Note that the resulting table is again too long to be shown fully, so we pipe it to <code>print(n = Inf)</code> as done before.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">raceethnicity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'group'. You can</span></span>
<span><span class="co">#&gt; override using the `.groups` argument.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 8 × 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># Groups:   group [2]</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>        <span style="font-weight: bold;">raceethnicity</span>        <span style="font-weight: bold;">n</span>   <span style="font-weight: bold;">prop</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics       African American     3 0.12  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Lyrics       Asian                5 0.2   </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">3</span> Lyrics       Caucasian           13 0.52  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">4</span> Lyrics       Hispanic             4 0.16  </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">5</span> Instrumental African American     1 0.043<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">6</span> Instrumental Asian                1 0.043<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">7</span> Instrumental Caucasian           16 0.696 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">8</span> Instrumental Hispanic             5 0.217</span></span></code></pre></div>
<p>This does not show any major differences between the two conditions. Only the proportion of Asian participants is somewhat imbalanced.</p>
<p>Overall, the results show that the two groups are not perfectly balanced, even though the groups were randomly created. This can happen in experiments, and in fact would be expected, especially if the group sizes are small as here (i.e., a maximum of 25 participants per condition). The larger the groups, the more likely it will be that they are balanced.</p>
<p>If the groups are unbalanced, is this a problem? Not necessarily. If you remember, the problem randomisation attempts to address are confounders -- third variables that can affect the dependent variable. Imbalance in experiments thus is problematic if we have imbalance in variables that are known to also affect the dependent variable. The question is if age and gender are such variables. I am not much of a sleep researcher, but would assume that the effect of gender on sleep efficiency is not extremely large. However, age surely has an effect on sleep, but I doubt whether that would be true in the age range of the participants here. If the age range were larger (e.g., one group had participants in their 40s or older and the other did not), I would be more concerned. The differences here seem rather unimportant overall. Nevertheless, in their main analysis <span class="citation">Scullin, Gao, and Fillmore (<a href="references.html#ref-scullinBedtimeMusicInvoluntary2021">2021</a>)</span> do adjust for the difference in gender, a statistical technique we will get back to later.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-35" class="exercise"><strong>Exercise 3.17  </strong></span>In addition to the demographic variables, we should also get an overview of the two control variables measuring participants' responses about their own state after listening to the music, variables <code>relaxed</code> and <code>sleepy</code>. Check whether they look similar across condition by calculating their mean and SD.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>A job for the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> combination that is one of the most frequent combination we use from the <code>tidyverse</code>.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>m_relaxed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">relaxed</span><span class="op">)</span>,</span>
<span>            sd_relaxed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">relaxed</span><span class="op">)</span>,</span>
<span>            m_sleepy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleepy</span><span class="op">)</span>,</span>
<span>            sd_sleep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">sleepy</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>        <span style="font-weight: bold;">m_relaxed</span> <span style="font-weight: bold;">sd_relaxed</span> <span style="font-weight: bold;">m_sleepy</span> <span style="font-weight: bold;">sd_sleep</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics            72.4       19.6     68.7     23.2</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Instrumental      70.7       20.7     66.2     18.3</span></span></code></pre></div>
<p>The differences in the relaxed and sleepiness question after listening to the music seem minor given the variability (i.e., SD) in the data.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-36" class="exercise"><strong>Exercise 3.18  </strong></span>Having now carefully checked and explored the data, it's time to take a look at research question 1: Does listening to the original version of a pop song (with lyrics) or an instrumental version of it affect whether or not participants develop earworms?</p>
<p>Let us look at this research question in multiple steps:</p>
<ol style="list-style-type: decimal">
<li>Calculate whether experimental condition (<code>group</code>) affects any of the three <code>earworm</code> dependent variables as well as the <code>earworm</code> control variable. For doing so, calculate the conditional means as well as the standard deviations.</li>
<li>Calculate two new dependent variables from the three dependent variables (i.e., <code>earworm_...</code> variables with the exception of <code>earworm_control</code>): any earworm at all (which should be 0 if participant did not report any earworm and 1 otherwise) and proportion of earworms (which should be the sum of the three earworm dependent variables divided by 3). Then calculate whether <code>group</code> affects these two new dependent variables.</li>
</ol>
<p>Does the analysis support the prediction that instrumental music leads to more earworms than lyrical music?</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>You already know the drill: Calculating conditional means and standard deviations is done through <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>. To calculate new variables (analysis 2), you need to use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p><strong>Analysis 1: Separate analysis for each dependent variable:</strong></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>m_fall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_falling_asleep</span><span class="op">)</span>,</span>
<span>            sd_fall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_falling_asleep</span><span class="op">)</span>,</span>
<span>            m_night <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_night</span><span class="op">)</span>,</span>
<span>            sd_night <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_night</span><span class="op">)</span>,</span>
<span>            m_morning <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_morning</span><span class="op">)</span>,</span>
<span>            sd_morning <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_morning</span><span class="op">)</span>,</span>
<span>            m_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_control</span><span class="op">)</span>,</span>
<span>            sd_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_control</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span> <span style="font-weight: bold;">m_fall</span> <span style="font-weight: bold;">sd_fall</span> <span style="font-weight: bold;">m_night</span> <span style="font-weight: bold;">sd_night</span> <span style="font-weight: bold;">m_morning</span> <span style="font-weight: bold;">sd_morning</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyri…  0.12    0.332  0.08      0.277     0.12       0.332</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Inst…  0.261   0.449  0.043<span style="text-decoration: underline;">5</span>    0.209     0.391      0.499</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 2 more variables: </span><span style="color: #555555; font-weight: bold;">m_cont</span><span style="color: #555555;"> &lt;dbl&gt;, </span><span style="color: #555555; font-weight: bold;">sd_cont</span><span style="color: #555555;"> &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Whereas this is the correct code, it does not show all variables of the returned data. One easy way to ensure all variables are shown is to convert the <code>tibble</code> back to a <code>data.frame</code>.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>m_fall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_falling_asleep</span><span class="op">)</span>,</span>
<span>            sd_fall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_falling_asleep</span><span class="op">)</span>,</span>
<span>            m_night <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_night</span><span class="op">)</span>,</span>
<span>            sd_night <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_night</span><span class="op">)</span>,</span>
<span>            m_morning <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_morning</span><span class="op">)</span>,</span>
<span>            sd_morning <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_morning</span><span class="op">)</span>,</span>
<span>            m_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">earworm_control</span><span class="op">)</span>,</span>
<span>            sd_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">earworm_control</span><span class="op">)</span></span>
<span>  <span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;          group    m_fall   sd_fall    m_night  sd_night</span></span>
<span><span class="co">#&gt; 1       Lyrics 0.1200000 0.3316625 0.08000000 0.2768875</span></span>
<span><span class="co">#&gt; 2 Instrumental 0.2608696 0.4489778 0.04347826 0.2085144</span></span>
<span><span class="co">#&gt;   m_morning sd_morning    m_cont   sd_cont</span></span>
<span><span class="co">#&gt; 1 0.1200000  0.3316625 0.4000000 0.5000000</span></span>
<span><span class="co">#&gt; 2 0.3913043  0.4990109 0.4782609 0.5107539</span></span></code></pre></div>
<p>We can see that for two of the three dependent variables, for earworms when falling asleep and in the morning, the proportion of earworms is noticeably larger in the instrumental than in the lyrical condition. For the proportion of earworms during the night and at the control time, we see a much smaller difference or even a small difference in the opposite direction.</p>
<p><strong>Analysis 2: Analysis for new dependent variables.</strong></p>
<p><em>Step 1: Calculate new variables</em></p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    prop_earworm <span class="op">=</span> <span class="op">(</span><span class="va">earworm_falling_asleep</span> <span class="op">+</span> <span class="va">earworm_night</span> <span class="op">+</span> </span>
<span>                      <span class="va">earworm_morning</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>any_earworm <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">prop_earworm</span> <span class="op">==</span> <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">prop_earworm</span>, <span class="va">any_earworm</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"earworm"</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id prop_earworm any_earworm earworm_falling_asleep</span></span>
<span><span class="co">#&gt; 1 102            0           0                      0</span></span>
<span><span class="co">#&gt; 2 103            0           0                      0</span></span>
<span><span class="co">#&gt; 3 104            0           0                      0</span></span>
<span><span class="co">#&gt; 4 105            0           0                      0</span></span>
<span><span class="co">#&gt; 5 106            0           0                      0</span></span>
<span><span class="co">#&gt; 6 107            0           0                      0</span></span>
<span><span class="co">#&gt;   earworm_night earworm_morning earworm_control</span></span>
<span><span class="co">#&gt; 1             0               0               1</span></span>
<span><span class="co">#&gt; 2             0               0               1</span></span>
<span><span class="co">#&gt; 3             0               0               0</span></span>
<span><span class="co">#&gt; 4             0               0               0</span></span>
<span><span class="co">#&gt; 5             0               0               0</span></span>
<span><span class="co">#&gt; 6             0               0               0</span></span></code></pre></div>
<p>We first calculate the new variables using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. To do so, we realise that the <code>any_earworm</code> variable is a function of the <code>prop_earworm</code> (= proportion of earworm) variable, so we calculate the latter first. To calculate the proportion variable we just add each of the three variables up and then divide by 3, being mindful that we need to put parentheses around the <code>+</code> operations.</p>
<p>We can then calculate the <code>any_earworm</code> variable from the <code>prop_variable</code>. Note that we do so in a new <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> call. The reason is that we need to refer to the <code>prop_variable</code> variable and it can lead to problems using variables that are created in the same <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> call. It might work, but is not guaranteed, so better to avoid it.</p>
<p>To calculate the <code>any_earworm</code> variable, we need to check when the <code>prop_earworm</code> variable is 0 and then assign 0 to the <code>any</code> variable and 1 otherwise. We use the <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> function for this which allows us to apply an if-else logic, as we have here, to a vector (i.e., if called with a vector, <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> also returns a vector). Here, the if-part checks if <code>prop_earworm == 0</code>; if it is, we return <code>0</code>, and <code>1</code> otherwise.</p>
<p>We then save the new variable back in the <code>earworm</code> data so we can use it again.</p>
<p>Because this is a non-trivial calculation, we end by printing the first few rows of the results to see if the calculated variables show what they should. We do this to make sure we did not make any errors. As printing the <code>tibble</code> per default would now show all variables we want ot see, we first select the relevant variables, convert the <code>tibble</code> to a <code>data.frame</code>, and then use <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> to get the first few rows. This shows it seems to work. However, as we do not see enough rows with 1s, we repeat the code but print the last few rows using <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code>. This output is more telling that our logic worked.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">prop_earworm</span>, <span class="va">any_earworm</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"earworm"</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     id prop_earworm any_earworm earworm_falling_asleep</span></span>
<span><span class="co">#&gt; 43 145    0.3333333           1                      1</span></span>
<span><span class="co">#&gt; 44 146    0.3333333           1                      1</span></span>
<span><span class="co">#&gt; 45 147    0.0000000           0                      0</span></span>
<span><span class="co">#&gt; 46 148    0.3333333           1                      0</span></span>
<span><span class="co">#&gt; 47 149    0.0000000           0                      0</span></span>
<span><span class="co">#&gt; 48 151    0.3333333           1                      1</span></span>
<span><span class="co">#&gt;    earworm_night earworm_morning earworm_control</span></span>
<span><span class="co">#&gt; 43             0               0               0</span></span>
<span><span class="co">#&gt; 44             0               0               1</span></span>
<span><span class="co">#&gt; 45             0               0               0</span></span>
<span><span class="co">#&gt; 46             0               1               1</span></span>
<span><span class="co">#&gt; 47             0               0               0</span></span>
<span><span class="co">#&gt; 48             0               0               1</span></span></code></pre></div>
<p><em>Step 2: Calculate conditional means and SDs</em></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>m_any <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">any_earworm</span><span class="op">)</span>,</span>
<span>            sd_any <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">any_earworm</span><span class="op">)</span>,</span>
<span>            m_prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">prop_earworm</span><span class="op">)</span>,</span>
<span>            sd_prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prop_earworm</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>        <span style="font-weight: bold;">m_any</span> <span style="font-weight: bold;">sd_any</span> <span style="font-weight: bold;">m_prop</span> <span style="font-weight: bold;">sd_prop</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics       0.28   0.458  0.107   0.186</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Instrumental 0.522  0.511  0.232   0.274</span></span></code></pre></div>
<p>This shows that for both new dependent variables, we see a difference in the expected direction.</p>
<p><strong>Overall answer:</strong> The analysis overall appears to support the prediction that listening to instrumental compared to lyrical music leads to more earworms. However, we still need, at some point, to do a proper statistical analysis to get a better understanding.</p>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-37" class="exercise"><strong>Exercise 3.19  </strong></span>Let's now take a look at research question 2: Does sleep quality differ between participants in the lyrical and the instrumental music condition (in which participants are expected to have more earworms)?</p>
<p>Check the effect of the independent variable on the main measure of sleep quality, <code>sleep_efficiency</code>, and also on the length of sleep, <code>sleep_time</code>. Don't forget to calculate both means and SD to judge the size of the difference given the level of noise.</p>
<p>In addition to just calculating the conditional means, also calculate the exact difference in sleep efficiency and sleeping time between both conditions.</p>
<p>Does the data overall support the prediction?</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>Conditional means is the job of the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> combination.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>The analysis can be straightforwardly adapted from the previous code. However, because we also want to calculate the difference exactly, we save the result in a new object, and then print it.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_sleep</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>m_efficiency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleep_efficiency</span><span class="op">)</span>,</span>
<span>            sd_efficiency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">sleep_efficiency</span><span class="op">)</span>,</span>
<span>            m_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleep_time</span><span class="op">)</span>,</span>
<span>            sd_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">sleep_time</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">summary_sleep</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">group</span>        <span style="font-weight: bold;">m_efficiency</span> <span style="font-weight: bold;">sd_efficiency</span> <span style="font-weight: bold;">m_time</span> <span style="font-weight: bold;">sd_time</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> Lyrics               94.3          2.97   507.    24.5</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> Instrumental         91.9          4.75   498.    26.0</span></span></code></pre></div>
<p>This shows that there is a small difference in sleep efficiency as well as time slept, in the predicted direction (i.e., a higher sleep quality for lyrical compared to instrumental music). However, the SD for sleep efficiency is much smaller than for time slept, which is perhaps not surprising given the very different magnitudes of the two variables (differing by about a factor of 5).</p>
<p>Let us now calculate the observed difference to understand the pattern better. With the <code>tidyverse</code> this can be done as:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_sleep</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>diff_efficiency <span class="op">=</span> <span class="va">m_efficiency</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">m_efficiency</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>            diff_time <span class="op">=</span> <span class="va">m_time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">m_time</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">diff_efficiency</span> <span style="font-weight: bold;">diff_time</span></span></span>
<span><span class="co">#&gt;             <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span>            2.43      9.68</span></span></code></pre></div>
<p>This shows that we can use normal vector indexing (i.e., <code>[1]</code> or <code>[2]</code>) for a vector inside <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</p>
<p>The same results could also be obtained with base <code>R</code> as:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_sleep</span><span class="op">$</span><span class="va">m_efficiency</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">summary_sleep</span><span class="op">$</span><span class="va">m_efficiency</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 2.425391</span></span>
<span></span>
<span><span class="va">summary_sleep</span><span class="op">$</span><span class="va">m_time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">summary_sleep</span><span class="op">$</span><span class="va">m_time</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 9.67687</span></span></code></pre></div>
<p>Overall, the results show that there is a difference in sleep quality that is around 50% of the observed SD in both measures. As for research question 1, a statistical analysis is necessary to better understand the pattern.</p>
<p>However, we can already say that the differences are not large in absolute terms. For example, the difference in time slept is around 10 minutes with an average sleep time that corresponds to more than 8 hours:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">500</span> <span class="op">/</span> <span class="fl">60</span>  <span class="co">## sleep time in minutes / 60 gives time in hours</span></span>
<span><span class="co">#&gt; [1] 8.333333</span></span></code></pre></div>
</div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-38" class="exercise"><strong>Exercise 3.20  </strong></span>The analysis so far supports the prediction for both research questions: Participants that listen to instrumental compared to lyrical songs report more earworms and sleep worse. However, this analysis does not address the question of whether participants that report earworms sleep worse than participants that do not report earworms.</p>
<p>As the last bit of the analysis, let's take a look at this question: Do participants that report having an earworm sleep better than participants that do not do so, ignoring the experimental condition. For this:</p>
<ol style="list-style-type: decimal">
<li>Create a new <code>factor</code>, <code>has_earworm</code>, that is <code>yes</code>, whenever participants report at least once that they had an earworm for one of the three <code>earworm</code> dependent variables (i.e., within the experimental time frame, ignoring the control time).</li>
<li>Calculate the conditional N (number of participants) as well as conditional means and SD of the two sleep variables, <code>sleep_efficiency</code> and <code>sleep_time</code>, as a function of <code>has_earworm</code>.</li>
</ol>
<p>What can we learn from this analysis?</p>
<div class="webex-solution">
<button>
Solution
</button>
<p>To create the new factor, <code>has_earworm</code>, we can transform <code>any_earworm</code> into a factor:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">earworm</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>has_earworm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>    <span class="va">any_earworm</span>,</span>
<span>    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"yes"</span>, <span class="st">"no"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then, we can use the previous code to calculate the conditional means and SDs.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_earworms</span> <span class="op">&lt;-</span> <span class="va">earworm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">has_earworm</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            m_efficiency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleep_efficiency</span><span class="op">)</span>,</span>
<span>            sd_efficiency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">sleep_efficiency</span><span class="op">)</span>,</span>
<span>            m_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleep_time</span><span class="op">)</span>,</span>
<span>            sd_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">sleep_time</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">summary_earworms</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 2 × 7</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">has_earworm</span>     <span style="font-weight: bold;">n</span> <span style="font-weight: bold;">m_efficiency</span> <span style="font-weight: bold;">sd_efficiency</span> <span style="font-weight: bold;">m_time</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span> yes            19         91.4          4.17   508.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">2</span> no             29         94.3          3.64   500.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># ℹ 2 more variables: </span><span style="color: #555555; font-weight: bold;">sd_time</span><span style="color: #555555;"> &lt;dbl&gt;, </span><span style="color: #555555; font-weight: bold;">prop</span><span style="color: #555555;"> &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co">## want to see all variables:</span></span>
<span><span class="va">summary_earworms</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   has_earworm  n m_efficiency sd_efficiency   m_time</span></span>
<span><span class="co">#&gt; 1         yes 19     91.41579      4.174428 507.5421</span></span>
<span><span class="co">#&gt; 2          no 29     94.27931      3.635183 499.6586</span></span>
<span><span class="co">#&gt;    sd_time      prop</span></span>
<span><span class="co">#&gt; 1 26.35405 0.3958333</span></span>
<span><span class="co">#&gt; 2 24.71534 0.6041667</span></span></code></pre></div>
<p>The analysis shows that around 40% report an earworm during the experimental time frame. And there is also an interesting pattern: Participants that report having an earworm have lower sleep efficiency scores but sleep slightly longer, compared to participants that do not report an earworm.</p>
<p>We can also again calculate the difference. Note that we need to change the order here to get the same interpretation as above (i.e., positive means in line with the prediction).</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_earworms</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>diff_efficiency <span class="op">=</span> <span class="va">m_efficiency</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">m_efficiency</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>            diff_time <span class="op">=</span> <span class="va">m_time</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">m_time</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   <span style="font-weight: bold;">diff_efficiency</span> <span style="font-weight: bold;">diff_time</span></span></span>
<span><span class="co">#&gt;             <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">1</span>            2.86     -<span style="color: #BB0000;">7.88</span></span></span></code></pre></div>
<p>What we can learn from the analysis is that it looks as if having an earworm leads to reduced sleep efficiency. The pattern for sleep length is more difficult to interpret (but also a lot smaller compared to the variability in the data as measured by the SD).</p>
<p>However, in this analysis we lose the benefit of randomisation. We do not really know if it is the earworm or something related to the earworm that drives the effect. Nevertheless, because we do not really have another way of introducing an earworm other than playing different types of music, it is still an important result.</p>
</div>
</div>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><div class="chapter-nav">
<div class="prev"><a href="tidyverse-intro.html"><span class="header-section-number">3</span> Short Introduction to R and the tidyverse</a></div>
<div class="next"><a href="ggplot2-intro.html"><span class="header-section-number">4</span> Data Visualisation with ggplot2</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidyverse-exercises">tidyverse: Example, Quiz, and Exercises</a></li>
<li>
<a class="nav-link" href="#extended-walasek-example"><span class="header-section-number">3.7</span> Extended tidyverse Example: Walasek &amp; Stewart (2015) Exp. 1a &amp; 1b</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#reading-both-data-sets"><span class="header-section-number">3.7.1</span> Reading Both Data Sets</a></li>
<li><a class="nav-link" href="#combining-both-data-sets"><span class="header-section-number">3.7.2</span> Combining Both Data Sets</a></li>
<li><a class="nav-link" href="#preparing-the-data-set-and-descriptive-analysis"><span class="header-section-number">3.7.3</span> Preparing the Data Set and Descriptive Analysis</a></li>
</ul>
</li>
<li><a class="nav-link" href="#quiz"><span class="header-section-number">3.8</span> Quiz</a></li>
<li><a class="nav-link" href="#practical-helpers-cheatsheets"><span class="header-section-number">3.9</span> Practical Helpers: Cheatsheets</a></li>
<li><a class="nav-link" href="#earworms-task1"><span class="header-section-number">3.10</span> tiydverse Exercise: Earworms and Sleep</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/singmann/stats_for_experiments/blob/main/tidyverse-examples-exercises.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/singmann/stats_for_experiments/edit/main/tidyverse-examples-exercises.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introduction to Statistics for Experimental Psychology with <code>R</code></strong>" was written by Henrik Singmann. It was last built on 2023-10-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
